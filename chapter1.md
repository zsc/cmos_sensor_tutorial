# 第1章：半导体物理与光电效应

本章深入探讨CMOS图像传感器的物理基础，从半导体基本特性出发，系统阐述光与物质相互作用的机制，以及如何将光信号转换为电信号。对于具有编程背景的读者，可以将半导体视为一个可编程的"光-电转换器"，其转换效率和特性由材料物理决定。本章的理论知识是理解后续像素设计、噪声优化等工程实践的基石。

## 1.1 半导体基础知识回顾

### 1.1.1 能带理论与载流子

半导体的独特之处在于其能带结构。价带（Valence Band）与导带（Conduction Band）之间存在禁带（Band Gap），硅的禁带宽度Eg约为1.12 eV（室温）。这个能量差决定了硅能够响应的最长波长：

```
λ_cutoff = hc/Eg ≈ 1.1 μm
```

其中h为普朗克常数（6.626×10^-34 J·s），c为光速（3×10^8 m/s）。这解释了为什么硅基传感器对近红外光敏感，但对更长波长的红外光不敏感。

#### 能带结构的温度依赖性

硅的禁带宽度随温度变化，可用Varshni经验公式描述：

```
Eg(T) = Eg(0) - αT²/(T + β)
```

其中Eg(0) = 1.166 eV，α = 4.73×10^-4 eV/K，β = 636 K。这种温度依赖性导致：
- 高温下禁带变窄，暗电流增加
- 低温下禁带变宽，长波响应降低
- 光谱响应的温度漂移约为0.15 nm/K

#### 载流子统计分布

载流子浓度遵循费米-狄拉克分布，在本征半导体中：
```
n_i = √(N_c × N_v) × exp(-Eg/2kT)
```

其中：
- N_c = 2(2πm_n*kT/h²)^(3/2) ≈ 2.8×10^19 cm^-3（导带有效态密度）
- N_v = 2(2πm_p*kT/h²)^(3/2) ≈ 1.04×10^19 cm^-3（价带有效态密度）
- m_n* = 1.08m_0（电子有效质量）
- m_p* = 0.56m_0（空穴有效质量）

室温下硅的本征载流子浓度约为1.5×10^10 cm^-3，这个数值决定了暗电流的下限。本征载流子浓度的精确值对温度极其敏感：

```
n_i ∝ T^(3/2) × exp(-Eg/2kT)
```

每升高10°C，n_i约增加1倍，这是暗电流温度依赖性的根本原因。

深入理解载流子统计对器件设计的影响：

**费米积分的应用**：在简并情况下（费米能级接近或进入能带），需要使用费米积分：
```
n = N_c × F_1/2((E_F - E_c)/kT)
```
其中F_1/2是1/2阶费米积分。当(E_F - E_c) < -3kT时，可以使用玻尔兹曼近似。

**准平衡态的载流子分布**：在光照或电注入条件下，电子和空穴分别用准费米能级描述：
```
n = n_i × exp((E_Fn - E_i)/kT)
p = n_i × exp((E_i - E_Fp)/kT)
```
准费米能级的分离ΔE_F = E_Fn - E_Fp表征了系统偏离平衡的程度，也决定了最大可能的开路电压。

**带隙变窄效应的修正**：高掺杂下，库仑相互作用导致带隙变窄：
```
ΔE_g = A × (N/N_ref)^(1/3) + B × (N/N_ref)^(1/4) + C × (N/N_ref)^(1/2)
```
其中N_ref = 10^17 cm^-3，A、B、C为拟合参数。这种效应在重掺杂区域（如浮置扩散节点）尤为重要。

#### 载流子的产生与复合平衡

在热平衡状态下，载流子的产生率与复合率相等：

```
G_thermal = R_thermal = n_i²/τ
```

其中τ为载流子寿命。典型的硅材料中：
- 电子寿命：10-100 μs（取决于纯度）
- 空穴寿命：1-10 μs（通常小于电子）
- 表面复合寿命：0.1-1 μs（未钝化表面）

这些参数直接影响光生载流子的收集效率和器件的响应速度。

**SRH（Shockley-Read-Hall）复合理论详解**：

通过深能级陷阱的复合过程由SRH理论描述：
```
R_SRH = (np - n_i²) / [τ_p(n + n_1) + τ_n(p + p_1)]
```

其中：
- n_1 = n_i × exp((E_t - E_i)/kT)（陷阱能级的电子浓度）
- p_1 = n_i × exp((E_i - E_t)/kT)（陷阱能级的空穴浓度）
- E_t：陷阱能级位置
- τ_n, τ_p：电子和空穴的俘获时间常数

**复合中心的影响**：

常见的复合中心及其特征：
1. **金（Au）**：E_t ≈ E_i，最有效的复合中心，常用于快速开关器件
2. **铁（Fe）**：E_t - E_i ≈ 0.38 eV，常见污染物
3. **铜（Cu）**：多个能级，快速扩散，需严格控制
4. **氧沉淀**：体内吸杂，可控制复合

**表面复合的物理机制**：

表面复合速度S描述界面复合的强度：
```
J_surface = qS(n_s - n_s0)
```

影响因素：
- 界面态密度D_it：典型值10^10-10^11 cm^-2eV^-1
- 表面电场：影响载流子浓度分布
- 钝化质量：H钝化可将S从10^5降至10^2 cm/s

**少子寿命的测量与控制**：

测量方法：
- μ-PCD（微波光电导衰减）：非接触，高精度
- QSSPC（准稳态光电导）：大面积平均
- SPV（表面光电压）：分离体寿命和表面复合

提高寿命的策略：
- 吸杂工艺：将金属杂质吸到非关键区域
- 氢钝化：饱和悬挂键
- 场钝化：通过固定电荷降低表面载流子浓度

### 1.1.2 掺杂与费米能级

通过掺杂可以精确控制半导体的电学特性。掺杂原子在晶格中的行为决定了材料的导电类型和载流子浓度。掺杂工程是CMOS传感器设计的核心，不同区域的掺杂浓度和分布直接决定了器件的光电性能、噪声特性和工作电压。

#### N型掺杂机制

掺入五价原子（施主杂质）提供额外电子：

常用施主杂质及其特性：
- **磷（P）**：电离能45 meV，扩散系数适中，最常用
- **砷（As）**：电离能54 meV，扩散慢，用于浅结
- **锑（Sb）**：电离能39 meV，扩散最慢，用于埋层

电离方程和载流子浓度：
```
n_D+ = N_D / (1 + g × exp((E_D - E_F)/kT))
```

室温下完全电离近似成立（kT ≈ 26 meV < E_D）：
```
n ≈ N_D (当 N_D >> n_i)
E_F - E_i = kT × ln(N_D/n_i)
```

#### P型掺杂机制

掺入三价原子（受主杂质）产生空穴：

常用受主杂质及其特性：
- **硼（B）**：电离能45 meV，扩散快，标准P型掺杂
- **镓（Ga）**：电离能65 meV，扩散慢
- **铟（In）**：电离能160 meV，深能级

受主电离和空穴浓度：
```
p_A- = N_A / (1 + g × exp((E_F - E_A)/kT))
```

完全电离下：
```
p ≈ N_A (当 N_A >> n_i)
E_i - E_F = kT × ln(N_A/n_i)
```

#### 掺杂浓度的工程考虑

典型CMOS传感器的掺杂策略：

1. **光电二极管N区**：
   - 浓度：10^15 - 10^16 cm^-3
   - 目的：形成适当耗尽区宽度
   - 权衡：量子效率vs电容
   - 深度分布：可采用逆向梯度提高收集效率

2. **钳位层（PPD）**：
   - P+层：10^17 - 10^18 cm^-3
   - 目的：表面钝化，减少暗电流
   - 深度：0.1-0.3 μm
   - 横向扩展：需考虑与传输栅的对准容差

3. **浮置扩散节点（FD）**：
   - N+：10^19 - 10^20 cm^-3
   - 目的：低电阻接触，高转换增益
   - 面积：决定转换增益（典型0.2-0.5 μm²）
   - 结深：0.2-0.3 μm，需优化与传输栅的耦合

4. **P阱（P-well）**：
   - 浓度：10^16 - 10^17 cm^-3
   - 目的：隔离NMOS晶体管，控制阈值电压
   - 深度：1-2 μm
   - 需考虑闩锁（Latch-up）抑制

5. **深P阱（Deep P-well）**：
   - 浓度：10^15 - 10^16 cm^-3
   - 目的：电学隔离，减少串扰
   - 深度：3-5 μm
   - 可选择性注入，优化不同像素性能

**掺杂分布的精确控制**：

离子注入参数优化：
```
深度分布：R_p = A × E^n（投影射程）
离散度：ΔR_p = B × E^m（离散）
横向扩散：约0.75 × ΔR_p
```

多次注入形成盒型分布：
- 第一次：高能量深注入（200-500 keV）
- 第二次：中能量（50-150 keV）
- 第三次：低能量浅注入（10-30 keV）

退火激活与扩散控制：
- RTA（快速热退火）：1000°C，10-30s，最小扩散
- 炉管退火：850°C，30min，均匀激活
- 激光退火：局部加热，亚微米精度

#### 补偿掺杂与净掺杂

实际器件中常存在补偿掺杂：

```
净掺杂浓度：N_net = |N_D - N_A|
多数载流子：n = (N_D - N_A) （N型）
           p = (N_A - N_D) （P型）
```

补偿掺杂的影响：
- 降低载流子迁移率（离化杂质散射增加）
- 影响耗尽区分布
- 可用于精确调节阈值电压

#### 重掺杂效应

当掺杂浓度超过10^18 cm^-3时，出现以下效应：

1. **禁带变窄（BGN）**：
   ```
   ΔEg = -22.5 × (N/10^18)^(1/2) meV
   ```

2. **费米能级进入能带**：
   - 简并半导体行为
   - 载流子统计需用费米积分

3. **杂质带形成**：
   - 杂质能级展宽成带
   - 增强隧穿概率

### 1.1.3 载流子输运机制

载流子在半导体中的运动决定了器件的响应速度和收集效率。理解输运机制对优化像素设计至关重要。

#### 漂移运动（Drift）

在电场作用下的定向运动，漂移速度与电场的关系：

低场情况（E < 10^3 V/cm）：
```
v_drift = μ × E
J_drift = q × (n×μ_n + p×μ_p) × E
```

高场情况（E > 10^4 V/cm）：
```
v_drift = v_sat / √(1 + (v_sat/μE)²)
```

硅中的饱和速度：
- 电子：v_sat,n ≈ 1.0×10^7 cm/s
- 空穴：v_sat,p ≈ 0.8×10^7 cm/s

#### 迁移率的影响因素

迁移率受多种散射机制影响：

1. **晶格散射（声子散射）**：
   ```
   μ_lattice ∝ T^(-3/2)
   ```
   主导高温和低掺杂区域

2. **离化杂质散射**：
   ```
   μ_impurity ∝ T^(3/2) / N_total
   ```
   主导低温和高掺杂区域

3. **总迁移率（Matthiessen规则）**：
   ```
   1/μ_total = 1/μ_lattice + 1/μ_impurity + 1/μ_others
   ```

典型值（室温，N = 10^16 cm^-3）：
- 电子迁移率：800-1000 cm²/V·s
- 空穴迁移率：300-400 cm²/V·s

#### 扩散运动（Diffusion）

由浓度梯度驱动的随机热运动：

```
J_diff = q × (D_n × ∇n - D_p × ∇p)
```

扩散系数与迁移率的关系（爱因斯坦关系）：
```
D/μ = kT/q ≈ 26 mV (室温)
```

扩散长度（载流子在寿命内的扩散距离）：
```
L_n = √(D_n × τ_n)
L_p = √(D_p × τ_p)
```

典型扩散长度：
- 电子：50-200 μm（高质量硅）
- 空穴：20-100 μm

#### 输运方程与连续性方程

完整的载流子输运由漂移-扩散方程描述：

电子电流密度：
```
J_n = qnμ_nE + qD_n∇n
```

空穴电流密度：
```
J_p = qpμ_pE - qD_p∇p
```

连续性方程（考虑产生-复合）：
```
∂n/∂t = (1/q)∇·J_n + G_n - R_n
∂p/∂t = -(1/q)∇·J_p + G_p - R_p
```

#### 准费米能级与非平衡态

光照下的非平衡态用准费米能级描述：

```
n = n_i × exp((E_Fn - E_i)/kT)
p = n_i × exp((E_i - E_Fp)/kT)
```

准费米能级分离表征注入水平：
```
ΔE_F = E_Fn - E_Fp = kT × ln(np/n_i²)
```

这个分离决定了光电压的理论上限。

#### 输运时间尺度

不同输运过程的特征时间：

1. **介电弛豫时间**：
   ```
   τ_diel = ε/σ ≈ 10^-12 s
   ```
   电荷重新分布时间

2. **渡越时间**：
   ```
   τ_transit = L²/(μV) ≈ 10^-10 s
   ```
   载流子穿越耗尽区时间

3. **扩散时间**：
   ```
   τ_diff = L²/D ≈ 10^-8 s
   ```
   扩散穿越像素时间

这些时间尺度决定了器件的频率响应和最大帧率。

## 1.2 PN结与耗尽区

### 1.2.1 PN结形成与内建电势

PN结是CMOS图像传感器的核心结构，其形成过程和特性决定了光电转换的效率。

#### 结形成过程

当P型和N型半导体接触时，发生以下过程：

1. **载流子扩散**：
   - 电子从N区扩散到P区
   - 空穴从P区扩散到N区
   - 扩散流：J_diff = qD_n(∂n/∂x) + qD_p(∂p/∂x)

2. **空间电荷区形成**：
   - N区留下正电离化施主
   - P区留下负电离化受主
   - 电荷密度：ρ = q(N_D - N_A + p - n)

3. **内电场建立**：
   - 电场方向：从N区指向P区
   - 最大电场：E_max = qN_AN_D/(N_A+N_D) × W/ε_s

#### 内建电势计算

热平衡下的内建电势：

```
V_bi = (kT/q) × ln(N_A × N_D / n_i²)
```

具体数值例子：
- N_A = 10^17 cm^-3, N_D = 10^15 cm^-3
- V_bi = 0.026 × ln(10^32/2.25×10^20) = 0.70 V

内建电势的温度依赖：
```
dV_bi/dT = (V_bi - 3kT/q - Eg)/T ≈ -2 mV/K
```

#### 电势分布与电场分布

泊松方程描述电势分布：
```
d²V/dx² = -ρ/ε_s
```

突变结近似下的解：

电场分布（抛物线）：
```
E(x) = E_max × (1 - x/W)  (0 < x < W)
```

电势分布：
```
V(x) = V_bi × [1 - (1 - x/W)²]
```

#### 耗尽区电荷平衡

电中性条件要求：
```
Q_N = Q_P
N_D × x_n = N_A × x_p
```

其中x_n和x_p分别为耗尽区在N区和P区的延伸：
```
x_n = W × N_A/(N_A + N_D)
x_p = W × N_D/(N_A + N_D)
```

单边突变结（N_A >> N_D）：
- 耗尽区主要在轻揺一侧
- x_n ≈ W, x_p ≈ 0
- 简化设计和分析

**缓变结和异质结的考虑**：

实际器件中常遇到缓变结：

1. **线性缓变结**：
   掺杂分布：N(x) = ax
   ```
   E_max = (2qa W²/3ε)^(1/3)
   W = [12ε(V_bi + V_R)/(qa)]^(1/3)
   ```
   特点：电场分布更均匀，击穿电压更高

2. **指数缓变结**：
   扩散形成的典型分布
   ```
   N(x) = N_s × exp(-x/L_D)
   ```
   其中L_D为特征扩散长度

3. **超突变结**：
   现代工艺的极限追求
   - 结深 < 10 nm
   - 需考虑量子效应
   - 隧穿电流增加

**异质结和能带工程**：

在先进传感器中可能使用：
- Si/SiGe异质结：提高红外响应
- 能带梯度结构：增强载流子分离
- ΔE_c、ΔE_v的设计优化

### 1.2.2 耗尽区特性

耗尽区是光电转换的主要区域，其特性直接影响传感器性能。耗尽区的设计需要在多个相互矛盾的性能指标间找到最佳平衡点。

#### 耗尽区宽度计算

总耗尽区宽度：
```
W = √(2ε_s × (V_bi + V_R) × (N_A + N_D)/(q × N_A × N_D))
```

参数说明：
- ε_s = 11.7 × 8.85×10^-14 F/cm（硅的介电常数）
- V_R：反向偏压（典型0-5V）
- q = 1.6×10^-19 C

不同偏置下的耗尽区宽度：
```
W(V_R) = W_0 × √(1 + V_R/V_bi)
```
其中W_0为零偏压耗尽区宽度。

#### 设计权衡

耗尽区宽度需要综合考虑：

**宽耗尽区优势**：
- 提高长波长量子效率（红光QE > 70%）
- 降低结电容（C ∝ 1/W）
- 增大收集体积
- 减少暗电流（体复合减少）

**窄耗尽区优势**：
- 减少电学串扰（<5%）
- 提高空间分辨率
- 快速响应（渡越时间短）
- 降低工作电压

典型设计参数：
- 1.4μm像素：W = 2-3μm
- 2.8μm像素：W = 3-5μm
- 5.6μm像素：W = 5-10μm

#### 耗尽区电场分布

电场强度决定载流子收集效率：

最大电场（结面处）：
```
E_max = √(2q × N_eff × (V_bi + V_R)/ε_s)
```

典型值：E_max = 10^4 - 10^5 V/cm

电场分布特点：
- 结面处最强
- 线性递减（突变结）
- 足够强以分离电子-空穴对

#### 耗尽区的动态变化

光照下耗尽区的变化：

1. **光生载流子积累**：
   - 电子被收集到N区
   - 空穴被收集到P区
   - 电荷分离降低内电场

2. **耗尽区收缩**：
   ```
   ΔW = Q_photo/(qN_eff × A)
   ```
   影响电容和收集效率

3. **饱和效应**：
   - 强光下耗尽区消失
   - 非线性响应
   - 需要及时复位

#### 边缘电场效应

像素边缘的电场增强：

```
    中心区域           边缘区域
       |                 |
   E_center          E_edge > E_center
       |                 |
   [均匀电场]        [电场增强]
```

影响：
- 边缘暗电流增加（2-5倍）
- 可能提前击穿
- 需要保护环设计

**保护环设计策略**：

1. **场板（Field Plate）结构**：
   ```
   金属场板
      |
   [氧化层]
      |
   [PN结边缘]
   ```
   作用：分散电场，减少尖峰

2. **场限环（Guard Ring）**：
   - P+保护环宽度：0.5-1 μm
   - 间距优化：0.3-0.5 μm
   - 可降低边缘暗电流约50%

3. **场止环（Field Stop）**：
   - 深N阱注入
   - 限制耗尽区扩展
   - 防止穿通（punch-through）

4. **STI（浅槽隔离）边缘优化**：
   - 圆角设计减少应力
   - 界面钝化减少陷阱
   - 填充材料优化

**角效应和三维电场分布**：

像素角落的电场增强更严重：
```
E_corner / E_center ≈ 2-3
```

缓解措施：
- 八角形或圆形像素设计
- 角落钝化增强
- 局部掺杂调整

### 1.2.3 结电容与RC时间常数

PN结电容是限制像素速度和噪声性能的关键参数。

#### 结电容的组成

总电容包括两部分：

1. **耗尽层电容**（主要部分）：
   ```
   C_dep = ε_s × A / W = A × √(qε_sN_eff/(2(V_bi + V_R)))
   ```

2. **扩散电容**（正向偏置时显著）：
   ```
   C_diff = dQ/dV = (qA/kT) × (L_n×n_p0 + L_p×p_n0) × exp(qV/kT)
   ```

反向偏置下主要考虑耗尽层电容。

#### 电容-电压特性

结电容随偏压变化：
```
C_j(V) = C_j0 / (1 + V_R/V_bi)^m
```

其中：
- C_j0：零偏压电容
- m：梯度系数（突变结m=0.5，线性缓变结m=0.33）

典型数值（以1.4μm像素为例）：
- 像素面积：A = 1.96 μm²
- 零偏电容：C_j0 ≈ 2 fF
- 3V偏压下：C_j ≈ 0.8 fF

#### RC时间常数分析

像素读出的RC时间常数：
```
τ_RC = R_out × C_total
```

其中：
- R_out：输出阻抗（源跟随器）1/g_m ≈ 1-10 kΩ）
- C_total = C_j + C_FD + C_parasitic

各电容贡献：
```
C_j：光电二极管电容 (~1 fF)
C_FD：浮置扩散节点电容 (~0.5 fF)
C_parasitic：寄生电容 (~0.5 fF)
```

总时间常数：τ_RC ≈ 2-20 ns

#### 对性能的影响

1. **读出速度限制**：
   ```
   f_max = 1/(2πτ_RC) ≈ 10-100 MHz
   ```
   决定最大帧率和行扫描速度

2. **kTC噪声**：
   ```
   σ_kTC = √(kT/C) ≈ 40 e- @ 1fF
   ```
   电容越小，热噪声越大

3. **转换增益**：
   ```
   G = q/C ≈ 160 μV/e- @ 1fF
   ```
   电容越小，增益越高

#### 电容优化策略

1. **结构优化**：
   - 钳位光电二极管（PPD）完全耗尽
   - 减少结面积
   - 增加反向偏压

2. **工艺优化**：
   - 降低揺杂浓度
   - 增加耗尽区宽度
   - 减少寄生电容

3. **电路设计**：
   - 高增益放大器
   - 低输出阻抗
   - 小尺寸浮置节点

#### 寄生电容的影响

寄生电容来源：
- 金属布线电容
- 栅极重叠电容
- 边缘电容

减少寄生电容的方法：
- 最小化金属走线
- 优化版图设计
- 使用低介电常数材料

## 1.3 光电效应与光生载流子

### 1.3.1 光吸收过程

光子在硅中的吸收遵循Beer-Lambert定律：

```
I(x) = I_0 × exp(-α × x)
```

吸收系数α强烈依赖于波长：
- 蓝光（450nm）：α ≈ 10^4 cm^-1，穿透深度约1μm
- 绿光（550nm）：α ≈ 10^3 cm^-1，穿透深度约10μm
- 红光（650nm）：α ≈ 3×10^2 cm^-1，穿透深度约30μm
- 近红外（850nm）：α ≈ 50 cm^-1，穿透深度约200μm

这种波长依赖性导致了颜色串扰问题，需要在像素设计中考虑。

### 1.3.2 载流子产生与复合

每个被吸收的光子产生一个电子-空穴对（假设量子效率为1）。产生率为：

```
G = α × Φ / (h × ν)
```

其中Φ为光通量。同时存在复合过程，包括：

- **辐射复合**：在硅中较弱，因为硅是间接带隙半导体
- **SRH复合**：通过缺陷能级，复合率为
  ```
  R_SRH = (n×p - n_i²) / (τ_n×(p+p_1) + τ_p×(n+n_1))
  ```
- **俄歇复合**：高注入条件下显著

载流子寿命τ决定了扩散长度L = √(D×τ)，典型值为10-100μm。

### 1.3.3 载流子收集效率

不是所有产生的载流子都能被收集。收集概率取决于：

1. **产生位置**：耗尽区内接近100%，中性区随距离指数衰减
2. **扩散长度**：L > 像素尺寸时，收集效率高
3. **表面复合**：Si-SiO2界面的表面态导致复合

总的收集效率可表示为：
```
η_c = ∫[P_c(x) × G(x) × dx] / ∫[G(x) × dx]
```

## 1.4 硅材料的光学特性

### 1.4.1 折射率与反射

硅的复折射率n + iκ决定了光学特性。在可见光范围：
- 折射率n：3.5-4.0
- 消光系数κ：与吸收系数相关，κ = α×λ/(4π)

菲涅尔反射导致约30%的入射光损失：
```
R = [(n_Si - n_air)² + κ²] / [(n_Si + n_air)² + κ²]
```

需要抗反射涂层降低反射损失。

### 1.4.2 光学穿透深度与颜色分离

不同波长的穿透深度差异可用于颜色分离：

```
     表面
       ↓
   [蓝光吸收] ← 0-2μm
       |
   [绿光吸收] ← 2-5μm
       |
   [红光吸收] ← 5-15μm
       |
   [近红外] ← >15μm
```

这是Foveon X3传感器的工作原理，也影响背照式传感器的设计。

### 1.4.3 温度效应

温度影响硅的光学和电学特性：

- 禁带宽度：dEg/dT ≈ -2.8×10^-4 eV/K
- 吸收边红移：约0.15nm/K
- 折射率变化：dn/dT ≈ 2×10^-4 /K

这些效应在精密成像应用中需要补偿。

## 1.5 量子效率与光谱响应

### 1.5.1 外量子效率（EQE）

EQE定义为收集的电子数与入射光子数之比：

```
EQE(λ) = η_optical × η_absorption × η_collection
```

其中：
- η_optical：考虑反射和透射损失
- η_absorption：光子被吸收的概率
- η_collection：载流子被收集的概率

典型CMOS传感器的峰值EQE约60-80%。

### 1.5.2 内量子效率（IQE）

IQE排除了光学损失，反映材料本身的光电转换效率：

```
IQE(λ) = EQE(λ) / (1 - R(λ) - T(λ))
```

理想情况下IQE接近100%，实际受表面复合和体复合限制。

### 1.5.3 光谱响应优化

通过以下方法优化不同波长的响应：

1. **抗反射涂层**：多层介质膜，优化特定波长范围
2. **表面钝化**：减少表面复合，提高蓝光响应
3. **深结设计**：增加耗尽区深度，提高红光响应
4. **背照式结构**：避免金属布线遮挡，全波段改善

光谱响应的均匀性对色彩还原至关重要。

## 1.6 噪声源分析

### 1.6.1 散粒噪声（Shot Noise）

散粒噪声源于光子到达和载流子产生的随机性，遵循泊松分布：

```
σ_shot = √(N_signal)
SNR_shot = √(N_signal)
```

对于1000个电子的信号，散粒噪声约32个电子。这是物理极限，无法消除。

### 1.6.2 热噪声（kTC噪声）

复位操作在感应节点电容上产生热噪声：

```
σ_kTC = √(kT/C)
```

对于1fF电容，室温下热噪声约64个电子。可通过相关双采样（CDS）消除。

### 1.6.3 暗电流噪声

暗电流由热激发产生，主要来源：

1. **耗尽区产生**：
   ```
   I_depletion = q × n_i × W × A / (2τ_g)
   ```

2. **表面产生**：
   ```
   I_surface = q × s × n_i × A_surface
   ```

典型暗电流密度：1-10 pA/cm²（室温），每10°C翻倍。

### 1.6.4 1/f噪声（闪烁噪声）

低频噪声，功率谱密度：

```
S_f = K / (f^α)
```

其中α≈1。主要影响长时间积分和低光照条件。来源包括：
- 界面陷阱
- 随机电报噪声（RTN）
- 载流子数涨落

### 1.6.5 固定模式噪声（FPN）

空间噪声，包括：

- **暗信号非均匀性（DSNU）**：暗电流的像素间差异
- **光响应非均匀性（PRNU）**：增益的像素间差异

通过标定和校正算法补偿。

## 本章小结

本章系统介绍了CMOS图像传感器的物理基础，关键要点包括：

1. **半导体物理**：硅的禁带宽度（1.12eV）决定了光谱响应范围，载流子浓度和迁移率影响器件性能
2. **PN结特性**：耗尽区提供收集光生载流子的电场，其宽度影响量子效率和电容
3. **光电转换**：吸收系数的波长依赖性导致颜色分离效应，需要优化设计
4. **量子效率**：EQE = η_optical × η_absorption × η_collection，典型值60-80%
5. **噪声机制**：散粒噪声是物理极限，热噪声可通过CDS消除，暗电流随温度指数增长

关键公式汇总：
- 截止波长：λ_cutoff = hc/Eg ≈ 1.1μm
- 内建电势：V_bi = (kT/q)ln(N_A×N_D/n_i²)
- 耗尽区宽度：W = √(2ε_s(V_bi+V_R)/qN_eff)
- 散粒噪声：σ_shot = √N
- 热噪声：σ_kTC = √(kT/C)

## 练习题

### 基础题

**1.1 载流子浓度计算**
室温下（300K），某N型硅的掺杂浓度为ND = 10^16 cm^-3。计算：
a) 多数载流子（电子）浓度
b) 少数载流子（空穴）浓度
c) 费米能级相对于本征能级的位置

*提示：使用质量作用定律 n×p = ni²*

<details>
<summary>参考答案</summary>

a) n ≈ ND = 10^16 cm^-3（完全电离假设）

b) p = ni²/n = (1.5×10^10)²/10^16 = 2.25×10^4 cm^-3

c) EF - Ei = kT×ln(n/ni) = 0.026×ln(10^16/1.5×10^10) = 0.35 eV

费米能级位于本征能级上方0.35eV，接近导带底。
</details>

**1.2 耗尽区设计**
设计一个PN结光电二极管，要求耗尽区宽度为5μm。已知NA = 10^17 cm^-3，需要施加3V反向偏压。计算所需的N型掺杂浓度ND。

*提示：使用单边突变结近似*

<details>
<summary>参考答案</summary>

对于NA >> ND的单边突变结：
W ≈ √(2εs(Vbi + VR)/(qND))

已知：W = 5×10^-4 cm, VR = 3V, εs = 11.7×8.85×10^-14 F/cm

估算Vbi ≈ 0.7V（典型值）

ND = 2εs(Vbi + VR)/(qW²)
   = 2×11.7×8.85×10^-14×3.7/(1.6×10^-19×25×10^-8)
   = 1.9×10^15 cm^-3

验证：此时确实满足NA >> ND，单边近似有效。
</details>

**1.3 量子效率分析**
某传感器在550nm波长下测得EQE = 65%，表面反射率R = 4%（有AR涂层）。假设所有进入硅的光子都被吸收，计算载流子收集效率。

*提示：EQE = (1-R) × ηabsorption × ηcollection*

<details>
<summary>参考答案</summary>

已知：EQE = 0.65, R = 0.04, ηabsorption ≈ 1（假设）

EQE = (1-R) × ηabsorption × ηcollection
0.65 = 0.96 × 1 × ηcollection
ηcollection = 0.65/0.96 = 0.677 ≈ 68%

这意味着约32%的光生载流子因复合等原因未被收集。
</details>

**1.4 噪声预算**
一个像素在100 lux照明下积分10ms，收集10000个电子。计算：
a) 散粒噪声
b) 如果读出电容为2fF，计算kTC噪声
c) 总噪声和信噪比

*提示：噪声功率相加*

<details>
<summary>参考答案</summary>

a) 散粒噪声：σshot = √10000 = 100 e-

b) kTC噪声：σkTC = √(kT/C) = √(1.38×10^-23×300/(2×10^-15))
           = √(2.07×10^-9) = 45.5 e-

c) 总噪声：σtotal = √(σshot² + σkTC²) = √(100² + 45.5²) = 110 e-

SNR = 10000/110 = 91 = 39.2 dB

注：实际应用中kTC噪声可通过CDS消除。
</details>

### 挑战题

**1.5 多波长量子效率优化**
设计一个像素结构，要求在450nm、550nm和650nm三个波长的量子效率都超过70%。考虑：
a) 耗尽区深度优化
b) 抗反射涂层设计原则
c) 可能的权衡因素

*提示：考虑不同波长的穿透深度差异*

<details>
<summary>参考答案</summary>

设计策略：

a) 耗尽区深度：
- 450nm穿透深度～1μm，需要浅结和良好表面钝化
- 550nm穿透深度～10μm，需要中等深度耗尽区
- 650nm穿透深度～30μm，需要深耗尽区
- 折中方案：耗尽区深度8-10μm，配合高质量外延层

b) AR涂层设计：
- 双层AR涂层：SiN/SiO2
- 优化中心波长在550nm
- 厚度：λ/4n原则，约70nm SiN + 90nm SiO2
- 宽带设计，450-650nm反射率<2%

c) 权衡因素：
- 深耗尽区vs串扰：深结提高红光QE但增加串扰
- 表面钝化vs工艺复杂度：提高蓝光响应但增加成本
- 填充因子vs光学效率：微透镜设计的优化

实际设计：背照式结构+10μm外延层+梯度掺杂
</details>

**1.6 温度补偿策略**
传感器工作温度范围-20°C到70°C，设计补偿方案使暗电流变化小于10倍。

*提示：暗电流每10°C翻倍*

<details>
<summary>参考答案</summary>

暗电流温度依赖：
Id(T) = Id0 × exp(Eg/2kT) ∝ T² × exp(-Eg/kT)

从-20°C到70°C，温度变化90°C = 9个10°C区间
无补偿时暗电流变化：2^9 = 512倍

补偿策略：

1. 主动温度控制（TEC）：
   - 控制温度在25±5°C
   - 暗电流变化<2倍
   - 功耗代价大

2. 实时暗帧校正：
   - 遮光像素实时监测暗电流
   - 软件补偿，动态更新
   - 需要额外像素和处理

3. 积分时间调整：
   - 高温时缩短积分时间
   - T_int(T) = T_int(25°C) × 2^((25-T)/10)
   - 配合增益补偿

4. 片上温度传感器+查找表：
   - 预标定暗电流-温度曲线
   - 实时温度测量和补偿
   - 精度取决于标定质量

推荐方案：2+4组合，可实现<10倍变化。
</details>

**1.7 超低噪声设计**
设计读出噪声<1个电子的像素，分析实现途径和物理限制。

*提示：考虑多次采样和信号放大*

<details>
<summary>参考答案</summary>

实现<1e-读出噪声的途径：

1. 噪声源分析：
   - kTC噪声：～40e- @ 1fF
   - 1/f噪声：主导低频
   - 热噪声：放大器贡献

2. 关键技术：

a) 非破坏性读出+多次采样：
   - CDS消除kTC和1/f噪声
   - N次采样降低√N倍噪声
   - 需要N=1600次达到1e-（从40e-）

b) 片上放大（如EMCCD）：
   - 雪崩增益G～100-1000
   - 噪声因子F～1.4（理想）
   - 有效噪声 = 读出噪声/G

c) 单光子雪崩二极管（SPAD）：
   - 盖革模式操作
   - 数字输出，无读出噪声
   - 但有暗计数和后脉冲

d) 浮栅放大器：
   - 极低输入电容（<0.1fF）
   - 源极跟随器优化
   - 需要特殊工艺

3. 物理限制：
   - 量子效率vs噪声权衡
   - 读出速度限制（RC时间）
   - 暗电流散粒噪声
   - 功耗和热噪声关系

实际方案：浮栅扩散节点+多次CDS+优化SF
已实现：0.3e- RMS（Canon, 2020）
</details>

**1.8 光子计数模式分析**
分析在极低光照下（<10 photons/pixel/frame）实现光子计数的条件和挑战。

*提示：考虑量子效率、噪声和非线性*

<details>
<summary>参考答案</summary>

光子计数模式要求：

1. 基本条件：
   - 读出噪声 << 1e-
   - 暗电流 < 0.1e-/s
   - QE > 80%
   - 线性度 > 99.9%

2. 信号分析（10光子case）：
   - 信号：10 × QE = 8e-（QE=80%）
   - 散粒噪声：√8 = 2.8e-
   - 需要读出噪声<0.5e-保证3σ分辨

3. 技术挑战：

a) 超低噪声读出：
   - 需要<0.5e- RMS
   - JFET SF或埋沟SF
   - 多次非破坏读出

b) 暗电流抑制：
   - 深度制冷（-40°C）
   - 钳位光电二极管
   - MPP（Multi-Pinned Phase）操作

c) 转换增益优化：
   - 小电容（<1fF）→高增益
   - 但降低满阱容量
   - 需要权衡动态范围

4. 实现方案：

方案1：qCMOS
- 深耗尽PPD + 浮栅扩散
- 0.3e-噪声，已商用
- 适合科学成像

方案2：EMCCD
- 片上电子倍增
- 有效噪声<0.1e-
- 但有倍增噪声

方案3：SPAD阵列
- 真正光子计数
- 时间分辨能力
- 填充因子低（<50%）

5. 性能指标：
- 探测概率：>70%（单光子）
- 误计数率：<1%
- 动态范围：受满阱限制
- 帧率：受读出时间限制

结论：qCMOS最实用，SPAD最彻底。
</details>

## 常见陷阱与错误

### 1. 概念误区

**陷阱1：混淆量子效率的定义**
- 错误：认为QE可以超过100%
- 正确：一个光子最多产生一个电子-空穴对（不考虑雪崩效应）
- 调试：检查测量设置，可能是增益或标定错误

**陷阱2：忽视温度效应**
- 错误：室温参数直接用于全温度范围
- 正确：禁带宽度、载流子浓度、迁移率都随温度变化
- 调试：建立温度模型，实测验证

**陷阱3：过度简化噪声模型**
- 错误：只考虑散粒噪声
- 正确：多种噪声源需要综合考虑
- 调试：频域分析识别不同噪声贡献

### 2. 设计错误

**陷阱4：耗尽区设计不当**
- 错误：一味追求深耗尽区
- 后果：串扰增加、响应速度降低
- 解决：根据像素大小和应用优化

**陷阱5：忽略表面效应**
- 错误：体模型直接应用
- 实际：表面复合速度可达10^5 cm/s
- 解决：表面钝化、界面工程

**陷阱6：AR涂层窄带设计**
- 错误：只优化单一波长
- 后果：宽光谱应用性能差
- 解决：多层宽带AR设计

### 3. 测量陷阱

**陷阱7：暗电流测量偏差**
- 错误：短时间测量推算
- 问题：忽略瞬态效应和RTN
- 正确：长时间积分，多次平均

**陷阱8：QE测量的光源标定**
- 错误：假设光源光谱平坦
- 实际：需要精确光谱标定
- 解决：使用标定过的单色仪

## 最佳实践检查清单

### 器件设计审查

- [ ] **掺杂浓度优化**
  - 耗尽区宽度满足QE要求？
  - 击穿电压留有余量（>20%）？
  - 考虑工艺偏差（±10%）？

- [ ] **结构参数验证**
  - 光学仿真与电学仿真一致？
  - 寄生电容最小化？
  - 填充因子>50%？

- [ ] **噪声预算分配**
  - 读出噪声<5e-？
  - 暗电流<10e-/s（室温）？
  - 总噪声满足SNR要求？

### 工艺可行性

- [ ] **工艺兼容性**
  - 使用标准CMOS工艺？
  - 特殊工艺步骤成本可接受？
  - 良率预期>90%？

- [ ] **热预算管理**
  - 总热预算<1000°C·s？
  - 掺杂分布保持稳定？
  - 界面质量不退化？

### 性能指标

- [ ] **光学性能**
  - QE峰值>70%？
  - 光谱响应覆盖400-700nm？
  - 串扰<5%？

- [ ] **电学性能**
  - 满阱容量>5000e-？
  - 转换增益>100μV/e-？
  - 线性度>99%？

- [ ] **可靠性**
  - 暗电流稳定性（1000小时）？
  - 热循环测试（-40到85°C）？
  - 辐射硬度（如需要）？

### 系统集成

- [ ] **接口兼容**
  - 供电电压标准（1.8V/2.8V/3.3V）？
  - 输出摆幅足够？
  - 时序余量>20%？

- [ ] **可测试性**
  - 测试结构完备？
  - 故障模式可识别？
  - 标定程序明确？

---

**下一章预告**：[第2章：MOS器件物理与CMOS工艺](chapter2.md) - 深入理解CMOS传感器的制造基础和器件特性。
