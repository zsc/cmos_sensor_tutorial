<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>第4章：像素架构演进</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>目录</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="搜索..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">CMOS 图像传感器设计与制造教程</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第1章：半导体物理与光电效应</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第2章：MOS器件物理与CMOS工艺</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第3章：光电二极管与像素理论</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第4章：像素架构演进</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第5章：读出电路设计</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第6章：时序控制与接口电路</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第7章：噪声分析与优化</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第8章：图像质量优化</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第9章：功耗与性能优化</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter10.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第10章：专用传感器设计</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter11.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第11章：片上图像信号处理</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter12.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第12章：制造工艺与良率</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter13.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第13章：传感器表征与测试</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter14.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第14章：系统集成与调试</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter15.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第15章：案例研究与未来趋势</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="4">第4章：像素架构演进</h1>
<p>本章深入探讨CMOS图像传感器像素架构的演进历程，从最简单的无源像素到现代复杂的专用像素设计。我们将分析每种架构的工作原理、优缺点以及适用场景，帮助读者理解像素设计中的关键权衡因素。通过本章学习，您将掌握如何根据具体应用需求选择和优化像素架构。</p>
<h2 id="41-pps">4.1 无源像素传感器（PPS）</h2>
<h3 id="411">4.1.1 基本结构与原理</h3>
<p>无源像素传感器（Passive Pixel Sensor, PPS）是最早的CMOS图像传感器架构，其设计理念源自于CCD的电荷转移机制，但采用了标准CMOS工艺实现。每个像素仅包含一个光电二极管和一个选择开关，这种极简设计在早期CMOS工艺节点下具有重要意义。</p>
<div class="codehilite"><pre><span></span><code>        列线（Column Line）
            |
            |
      ┌─────┴─────┐
      │           │
      │    SW     │ ← 行选择信号
      │           │
      └─────┬─────┘
            │
        ┌───┴───┐
        │       │
        │  PD   │ ← 光电二极管
        │       │
        └───────┘
            │
           GND
</code></pre></div>

<p>PPS的物理实现通常基于N+/P-sub结构，形成一个反偏PN结。在光照条件下，入射光子在耗尽区及其附近产生电子-空穴对。由于内建电场的作用，光生电子被收集到N+区域，而空穴则流向P型衬底。这个过程导致结电容上的电压发生变化，该变化量正比于入射光强度和积分时间。</p>
<p>工作原理可分为三个关键阶段：</p>
<ol>
<li>
<p><strong>积分阶段</strong>：光电二极管处于反偏状态，初始电压为复位电平（通常为VDD）。光生载流子不断累积，使得节点电压逐渐下降。积分时间内的电压变化量ΔV = Q_photo/C_pd，其中Q_photo是光生电荷量，C_pd是光电二极管的结电容。结电容大小取决于PN结面积和耗尽区宽度，典型值在5-50 fF范围内。</p>
</li>
<li>
<p><strong>读出阶段</strong>：行选择开关导通，像素通过列线连接到外部读出电路。此时发生关键的电荷重分配过程：像素电容C_pd与列线寄生电容C_col形成分压器。由于C_col &gt;&gt; C_pd（通常C_col是C_pd的100-1000倍），信号严重衰减。实际输出信号仅为原始信号的C_pd/(C_pd + C_col)倍，这是PPS架构的根本性缺陷。</p>
</li>
<li>
<p><strong>复位阶段</strong>：通过外部电路对光电二极管复位到初始电压。复位可以通过列线实现（软复位）或通过专门的复位线实现（硬复位）。复位的完全性直接影响下一帧的图像质量，不完全复位会导致图像残留。</p>
</li>
</ol>
<h3 id="412">4.1.2 信号读出分析</h3>
<p>PPS的信号读出过程涉及复杂的电荷转移和电压重分配机制。理解这一过程对于认识PPS的局限性至关重要。</p>
<p><strong>电荷积分过程的定量分析</strong>：</p>
<p>光电二极管在积分期间的电荷收集遵循泊松过程。入射光子产生电子-空穴对的速率取决于入射光功率和量子效率：</p>
<div class="codehilite"><pre><span></span><code>dQ/dt = η × (P_opt/hν) × q
</code></pre></div>

<p>其中η是量子效率，P_opt是入射光功率，hν是光子能量，q是电子电荷。对于550nm绿光，在1 lux照度下，典型的2μm×2μm像素接收约1000 photons/ms。考虑50%的量子效率，产生500 e⁻/ms的光电流。</p>
<p>在理想情况下，光电二极管上的信号电压为：</p>
<div class="codehilite"><pre><span></span><code><span class="n">V_pd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">V_reset</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Q_signal</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">C_pd</span>
</code></pre></div>

<p>其中：</p>
<ul>
<li>V_reset：复位电压（典型值2.5-3.3V）</li>
<li>Q_signal：积分期间累积的信号电荷（与光强和积分时间成正比）</li>
<li>C_pd：光电二极管电容（包括结电容和寄生电容）</li>
</ul>
<p><strong>非理想效应的影响</strong>：</p>
<p>实际的积分过程受多种非理想效应影响：</p>
<ol>
<li><strong>电容的电压依赖性</strong>：PN结电容随反偏电压变化</li>
</ol>
<div class="codehilite"><pre><span></span><code>C_pd(V) = C_j0 / √(1 + V/V_bi)
</code></pre></div>

<p>其中C_j0是零偏电容，V_bi是内建电势（硅中约0.7V）。这导致转换增益的非线性。</p>
<ol start="2">
<li><strong>暗电流积分</strong>：即使无光照，热产生的载流子也会积累</li>
</ol>
<div class="codehilite"><pre><span></span><code>I_dark = A × J_dark = A × (D_n × n_i²/N_A × L_n)
</code></pre></div>

<p>室温下典型暗电流密度为1-10 nA/cm²，对应每像素约0.04-0.4 fA。</p>
<ol start="3">
<li><strong>电荷共享效应</strong>：邻近像素间的电荷扩散
   扩散长度L_diff = √(D × t)，其中D是扩散系数，t是积分时间。对于电子在硅中，D ≈ 35 cm²/s，100ms积分时间下扩散长度可达60μm，远超像素尺寸。</li>
</ol>
<p>然而，实际读出时情况截然不同。当行选择开关导通瞬间，光电二极管通过开关晶体管连接到列线。列线具有显著的寄生电容C_col，主要来源包括：</p>
<ol>
<li><strong>金属走线电容</strong>：列线通常贯穿整个像素阵列，长度可达数毫米。以0.18μm工艺为例，金属线电容约0.2 fF/μm，一条5mm长的列线仅走线电容就达1 pF。金属层间的平行板电容：</li>
</ol>
<div class="codehilite"><pre><span></span><code>C_metal = ε_0 × ε_r × W × L / d
</code></pre></div>

<p>其中ε_r≈3.9（SiO₂），W是线宽（0.3μm），L是长度（5mm），d是层间距（0.5μm）。</p>
<ol start="2">
<li>
<p><strong>交叉耦合电容</strong>：列线与行线、电源线等其他金属层的交叉点产生耦合电容，每个交叉点贡献约0.1-0.5 fF。对于1920×1080阵列，累积效应显著。边缘场效应使实际电容比平行板模型高20-30%。</p>
</li>
<li>
<p><strong>晶体管寄生电容</strong>：每行的选择晶体管关断时，其漏极仍连接在列线上，贡献结电容。</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>C_j = C_j0 × A_j / (1 + V_R/V_bi)^m
</code></pre></div>

<p>其中A_j是结面积，m是梯度系数（突变结m=0.5）。1000行的累积效应可达数百fF。</p>
<ol start="4">
<li>
<p><strong>ESD保护电路</strong>：列线末端的ESD保护二极管增加额外的结电容，典型值50-200 fF。ESD二极管需要足够大以承受2kV HBM（人体模型）放电，面积通常&gt;100μm²。</p>
</li>
<li>
<p><strong>版图寄生效应</strong>：通孔（via）、接触孔（contact）的寄生电容
   每个通孔约贡献0.1-0.2 fF，整条列线可能有数百个通孔连接不同金属层。</p>
</li>
</ol>
<p>总体而言，C_col通常在1-10 pF范围，是C_pd的100-1000倍。这导致严重的信号衰减：</p>
<div class="codehilite"><pre><span></span><code><span class="err">电荷分享比：η</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C_pd</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">C_pd</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">C_col</span><span class="p">)</span>
<span class="err">实际输出：</span><span class="n">V_out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">V_reset</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="err">η</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="p">(</span><span class="n">Q_signal</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">C_pd</span><span class="p">)</span>
</code></pre></div>

<p>以典型参数计算：C_pd = 10 fF，C_col = 1 pF，则η ≈ 0.01，信号衰减100倍！这意味着原本100 mV的信号变化在列线上仅表现为1 mV，极易被噪声淹没。</p>
<p><strong>电荷分享的动态过程</strong>：</p>
<p>当选择开关导通时，电荷重分配并非瞬时完成，而是遵循指数衰减：</p>
<div class="codehilite"><pre><span></span><code>V_col(t) = V_pd × C_pd/(C_pd + C_col) × (1 - exp(-t/τ))
</code></pre></div>

<p>其中时间常数τ = R_on × (C_pd × C_col)/(C_pd + C_col)。对于R_on = 5kΩ，有效电容约10fF，τ ≈ 50ns。这限制了读出速度的上限。</p>
<p><strong>信号衰减的频率响应</strong>：</p>
<p>选择开关和列线形成的RC网络具有低通特性：</p>
<div class="codehilite"><pre><span></span><code>H(f) = 1 / (1 + j2πfR_onC_col)
</code></pre></div>

<p>3dB带宽f_3dB = 1/(2πR_onC_col) ≈ 30 MHz。这意味着快速变化的信号成分会进一步衰减，影响图像的高频细节。</p>
<p>更糟糕的是，读出速度受RC时间常数限制：</p>
<div class="codehilite"><pre><span></span><code>τ = R_on × (C_pd + C_col)
</code></pre></div>

<p>其中R_on是选择开关的导通电阻（典型值1-10 kΩ）。选择开关的导通电阻取决于其工作区域：</p>
<div class="codehilite"><pre><span></span><code>R_on = 1 / (μn × Cox × (W/L) × (VGS - Vth))
</code></pre></div>

<p>对于W/L = 1μm/0.35μm的NMOS，VGS-Vth = 1V时，R_on ≈ 5kΩ。</p>
<p>对于C_col = 1 pF，R_on = 5 kΩ，时间常数τ = 5 ns。要达到99%稳定需要约5τ = 25 ns，这限制了最高读出速度。</p>
<p><strong>稳定时间的精确分析</strong>：</p>
<p>信号稳定到目标精度ε所需的时间：</p>
<div class="codehilite"><pre><span></span><code>t_settle = -τ × ln(ε)
</code></pre></div>

<p>对于12位ADC（ε = 1/4096 ≈ 0.024%），需要t_settle ≈ 8.3τ ≈ 42ns。这严重限制了高分辨率传感器的帧率。</p>
<p>信噪比（SNR）分析更揭示了PPS的根本缺陷。考虑主要噪声源：</p>
<ol>
<li><strong>复位噪声（kTC噪声）</strong>：</li>
</ol>
<div class="codehilite"><pre><span></span><code>σ_reset = √(kT × C_pd) = √(1.38×10⁻²³ × 300 × 10×10⁻¹⁵) ≈ 64 μV
</code></pre></div>

<p>转换为电子数：N_reset = σ_reset × C_pd/q ≈ 4 e⁻ rms</p>
<ol start="2">
<li><strong>列线热噪声</strong>：由于大电容C_col，列线kTC噪声更大</li>
</ol>
<div class="codehilite"><pre><span></span><code>σ_col = √(kT × C_col) ≈ 2 mV（对于1pF列线电容）
</code></pre></div>

<p>这个噪声在列线上直接叠加，无法通过像素设计消除。</p>
<ol start="3">
<li>
<p><strong>放大器噪声</strong>：外部放大器的输入参考噪声直接叠加
   典型CMOS运放输入噪声密度：10 nV/√Hz
   对于1MHz带宽：σ_amp ≈ 10 μV rms</p>
</li>
<li>
<p><strong>量化噪声</strong>：ADC引入的噪声</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>σ_Q = LSB/√12 = V_ref/(2^N × √12)
</code></pre></div>

<p>对于12位ADC，1V参考电压，σ_Q ≈ 70 μV rms</p>
<p><strong>总噪声和SNR计算</strong>：</p>
<p>考虑所有噪声源（假设不相关）：</p>
<div class="codehilite"><pre><span></span><code>σ_total = √(σ_reset² + σ_col²/η² + σ_amp²/η² + σ_Q²)
</code></pre></div>

<p>由于信号衰减η ≈ 0.01，噪声被放大100倍：</p>
<ul>
<li>原始信号：100 mV</li>
<li>衰减后信号：1 mV</li>
<li>等效输入噪声：&gt;200 mV（主要由列线噪声贡献）</li>
<li>SNR &lt; 0 dB（信号完全被噪声淹没）</li>
</ul>
<p>这解释了为什么PPS架构在实际应用中无法产生可用的图像质量。</p>
<h3 id="413">4.1.3 优缺点分析</h3>
<p><strong>优点的深入分析</strong>：</p>
<ol>
<li>
<p><strong>极高填充因子</strong>：由于每个像素仅含一个晶体管，填充因子可达60-70%，这在早期小像素设计中极具优势。相比之下，同期的CCD像素填充因子通常仅30-40%。</p>
</li>
<li>
<p><strong>工艺简单性</strong>：PPS可用标准数字CMOS工艺制造，无需CCD的特殊工艺步骤（如多晶硅电极、埋沟道等）。这大幅降低了制造成本，使CMOS传感器的商业化成为可能。</p>
</li>
<li>
<p><strong>功耗优势</strong>：像素本身几乎不消耗功率，仅在读出时有瞬态电流。整个传感器的功耗主要来自外围电路，典型功耗比CCD低10-100倍。</p>
</li>
<li>
<p><strong>随机访问能力</strong>：不同于CCD的串行读出，PPS支持真正的随机像素访问，可实现感兴趣区域（ROI）读出，这对某些应用极具价值。</p>
</li>
</ol>
<p><strong>缺点的深入剖析</strong>：</p>
<ol>
<li>
<p><strong>信号衰减的级联效应</strong>：100-1000倍的信号衰减不仅降低了信号幅度，更关键的是破坏了信噪比。这迫使设计者采用高增益、低噪声的外部放大器，增加了系统复杂度和成本。</p>
</li>
<li>
<p><strong>固定模式噪声（FPN）灾难</strong>：每个像素的晶体管阈值电压存在工艺偏差（σ_Vth ≈ 5-10 mV），这些偏差直接反映在输出信号中。由于缺乏像素内增益，FPN无法在像素级消除，需要复杂的片外校准。</p>
</li>
<li>
<p><strong>动态范围受限</strong>：下限受噪声限制（读出噪声等效&gt;100 e⁻），上限受光电二极管容量限制（典型&lt;50,000 e⁻），导致动态范围通常&lt;50 dB，远低于人眼的&gt;120 dB。</p>
</li>
<li>
<p><strong>读出速度瓶颈</strong>：大的RC时间常数限制了行读出速度。对于Full HD（1920×1080）30fps视频，每行可用时间仅约15 μs，扣除稳定时间后，实际采样时间极短。</p>
</li>
<li>
<p><strong>缩放困难</strong>：随着像素尺寸缩小，C_pd按面积缩放（∝L²），但C_col按长度缩放（∝L），导致信号衰减比η ∝ L，像素越小问题越严重。这是PPS架构最终被淘汰的根本原因。</p>
</li>
</ol>
<h2 id="42-3t3t-aps">4.2 3T有源像素传感器（3T-APS）</h2>
<h3 id="421">4.2.1 架构革新</h3>
<p>3T有源像素传感器（Active Pixel Sensor, APS）的诞生标志着CMOS图像传感器的重大突破。1968年，Noble首次提出了有源像素概念，但直到1990年代初，随着CMOS工艺的成熟，Eric Fossum等人在JPL才实现了实用化的3T-APS。这一架构通过在每个像素内集成放大器，从根本上解决了PPS的信号衰减问题。</p>
<div class="codehilite"><pre><span></span><code>         VDD
          │
    ┌─────┴─────┐
    │    RST    │ ← 复位信号
    └─────┬─────┘
          │
      ┌───┴───┐
      │       │
      │  PD   │ ← 光电二极管（浮动扩散FD）
      │       │
      └───┬───┘
          │
    ┌─────┴─────┐
    │    SF     │ ← 源跟随器
    └─────┬─────┘
          │
    ┌─────┴─────┐
    │    SEL    │ ← 行选择
    └─────┬─────┘
          │
        列线
</code></pre></div>

<p>三个晶体管的设计考量：</p>
<ol>
<li>
<p><strong>复位晶体管（RST）</strong>：通常采用NMOS实现，将浮动扩散（FD）节点复位到VDD-Vth（软复位）或VDD（硬复位）。晶体管尺寸需要权衡：过小导致复位时间过长，过大增加寄生电容和泄漏。典型W/L比为0.5/0.35（μm），既保证快速复位又最小化对FD电容的贡献。复位晶体管的阈值电压变化直接影响FPN，因此需要careful的版图匹配设计。</p>
</li>
<li>
<p><strong>源跟随器（SF）</strong>：作为像素内的第一级放大，SF的性能直接决定了图像质量。理想的源跟随器应具有单位增益和零偏移，但实际增益通常为0.7-0.9，取决于晶体管的跨导gm和负载电流。SF晶体管的尺寸优化涉及多个权衡：
   - 增大W/L提高跨导，改善增益和带宽
   - 但也增加了输入电容，降低转换增益
   - 1/f噪声与WL成反比，需要足够大的面积
   - 典型设计：W/L = 1.0/1.0 μm，在性能和面积间取得平衡</p>
</li>
<li>
<p><strong>行选择晶体管（SEL）</strong>：控制像素与列线的连接，实现行选址功能。SEL可以放置在SF的源极（源极选择）或漏极（漏极选择）。源极选择的优势是关断时功耗为零，但开启时存在体效应；漏极选择避免了体效应，但需要持续的偏置电流。现代设计多采用源极选择以降低功耗。</p>
</li>
</ol>
<h3 id="422">4.2.2 工作时序与信号链分析</h3>
<p>3T-APS的工作时序看似简单，但每个阶段都蕴含着精细的设计考量：</p>
<div class="codehilite"><pre><span></span><code>RST  ━━━┓    ┏━━━━━━━━━━━━━━━━
        ┗━━━━┛

SEL  ━━━━━━━━┓              ┏━━
             ┗━━━━━━━━━━━━━━┛

Vout ════════╗──────────────╗══
      复位电平         信号电平
      (V_rst)         (V_sig)
</code></pre></div>

<p><strong>复位阶段的深入分析</strong>：</p>
<p>复位过程并非瞬时完成，而是遵循RC充电曲线。FD节点电压变化为：</p>
<div class="codehilite"><pre><span></span><code>V_FD(t) = V_DD - (V_DD - V_initial) × exp(-t/τ_rst)
</code></pre></div>

<p>其中τ_rst = R_on,rst × C_FD，R_on,rst是复位晶体管的导通电阻。</p>
<p>复位不完全会导致图像滞后（image lag）。定义复位效率为：</p>
<div class="codehilite"><pre><span></span><code>η_rst = (V_FD,final - V_FD,initial) / (V_DD - V_FD,initial)
</code></pre></div>

<p>要达到99.9%的复位效率，需要约7个时间常数，即t_rst &gt; 7τ_rst。</p>
<p>软复位（RST晶体管工作在亚阈值区）引入kTC噪声，但硬复位（RST晶体管工作在线性区）可能导致热载流子注入，增加暗电流。现代设计通常采用脉冲复位或反馈复位来优化这一权衡。</p>
<p><strong>积分阶段的载流子动力学</strong>：</p>
<p>积分期间，光生电子在FD节点累积，导致电压下降：</p>
<div class="codehilite"><pre><span></span><code>dV_FD/dt = -I_photo / C_FD = -(η × Φ × A_pd × q) / C_FD
</code></pre></div>

<p>其中：</p>
<ul>
<li>η：量子效率</li>
<li>Φ：光子通量（photons/s/cm²）</li>
<li>A_pd：光电二极管面积</li>
<li>q：电子电荷</li>
</ul>
<p>FD节点不仅收集光生电荷，还受到各种泄漏电流影响：</p>
<ol>
<li>暗电流：I_dark ∝ exp(-Eg/2kT)，强温度依赖性</li>
<li>复位晶体管亚阈值泄漏：I_sub ∝ exp(V_gs/nV_T)</li>
<li>隧穿电流：在先进工艺节点变得显著</li>
</ol>
<p><strong>读出阶段的信号完整性</strong>：</p>
<p>源跟随器将FD电压缓冲到列线，但过程中存在多种非理想效应：</p>
<ol>
<li><strong>增益非线性</strong>：由于体效应和沟道长度调制，SF增益随输入电压变化：</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">A_SF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gm</span><span class="o">/</span><span class="p">(</span><span class="n">gm</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gmb</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gds</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="n">R_load</span><span class="p">)</span>
</code></pre></div>

<p>其中gmb是体跨导，gds是输出电导。非线性会导致图像失真。</p>
<ol start="2">
<li><strong>带宽限制</strong>：SF的3dB带宽为：</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">f_3dB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="err">π</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="n">C_load</span><span class="p">)</span>
</code></pre></div>

<p>对于高分辨率传感器，C_load可达数pF，限制了读出速度。</p>
<ol start="3">
<li><strong>噪声注入</strong>：SF贡献的噪声功率谱密度为：</li>
</ol>
<div class="codehilite"><pre><span></span><code>S_n = 4kT × γ × (2/3) / gm + K_f / (C_ox × W × L × f)
</code></pre></div>

<p>第一项是热噪声，第二项是1/f噪声。</p>
<h3 id="423">4.2.3 噪声特性的全面分析</h3>
<p>3T像素的噪声性能是其最大的技术挑战，深入理解各噪声源的物理机制对优化设计至关重要。</p>
<p><strong>1. 复位噪声（kTC噪声）的物理本质</strong>：</p>
<p>复位噪声源于热力学的基本原理。当复位晶体管导通时，FD节点通过有限电阻连接到电源，形成RC低通滤波器。根据Nyquist定理，电阻产生的热噪声经过电容积分后，在FD节点产生电压噪声：</p>
<div class="codehilite"><pre><span></span><code>&lt;V²_n&gt; = kT/C_fd
σ_reset = √(kT/C_fd)
</code></pre></div>

<p>以室温（T=300K）和C_fd=10fF为例：</p>
<div class="codehilite"><pre><span></span><code>σ_reset = √(1.38×10⁻²³ × 300 / 10×10⁻¹⁵) = 64 μV
</code></pre></div>

<p>转换为电子数：</p>
<div class="codehilite"><pre><span></span><code>N_reset = σ_reset × C_fd / q = 40 e⁻ rms
</code></pre></div>

<p>这是3T像素的fundamental噪声下限，无法通过电路技术消除，只能通过增大C_fd来降低，但这会牺牲转换增益。这个两难困境直接推动了4T像素和CDS技术的发展。</p>
<p><strong>2. 源跟随器噪声的多维度分析</strong>：</p>
<p>源跟随器作为模拟缓冲器，引入多种噪声成分：</p>
<p>a) <strong>热噪声（白噪声）</strong>：
MOS晶体管沟道电阻的热涨落产生电流噪声，其功率谱密度为：</p>
<div class="codehilite"><pre><span></span><code>S_id = 4kT × γ × gm
</code></pre></div>

<p>其中γ是噪声因子（长沟道约2/3，短沟道可达1-2）。</p>
<p>折合到输入端的电压噪声：</p>
<div class="codehilite"><pre><span></span><code>S_vn = S_id / gm² = 4kT × γ / gm
</code></pre></div>

<p>积分带宽内的总噪声：</p>
<div class="codehilite"><pre><span></span><code>σ_sf_thermal = √(∫S_vn × df) = √(8kTγ/3gm × BW)
</code></pre></div>

<p>对于gm=100μS，BW=1MHz，噪声约50μV rms。</p>
<p>b) <strong>1/f噪声（闪烁噪声）</strong>：
由Si-SiO₂界面陷阱的随机捕获释放载流子引起，功率谱密度为：</p>
<div class="codehilite"><pre><span></span><code>S_vn_flicker = K_f / (C_ox × W × L × f)
</code></pre></div>

<p>K_f是工艺相关常数（NMOS约10⁻²⁴ V²·F）。1/f噪声在低频（&lt;100kHz）占主导，对慢速读出影响显著。优化策略包括：</p>
<ul>
<li>增大晶体管面积WL</li>
<li>采用PMOS源跟随器（K_f更小）</li>
<li>相关多采样（CMS）技术</li>
</ul>
<p>c) <strong>随机电报噪声（RTN）</strong>：
单个界面陷阱的捕获释放导致离散的电流跳变，在小尺寸晶体管中变得显著。RTN幅度：</p>
<div class="codehilite"><pre><span></span><code>ΔRTN = q / (W × L × C_ox) × 1/√N
</code></pre></div>

<p>其中N是沟道载流子数。当像素缩小到亚微米尺度，RTN可达数百μV，成为图像质量的limiting factor。</p>
<p><strong>3. 固定模式噪声（FPN）的系统影响</strong>：</p>
<p>FPN不同于时域随机噪声，它在空间上固定但随时间稳定，主要来源包括：</p>
<p>a) <strong>阈值电压失配</strong>：
由于掺杂涨落和线边粗糙度（LER），相邻晶体管的Vth存在偏差：</p>
<div class="codehilite"><pre><span></span><code>σ_Vth = A_Vth / √(W × L)
</code></pre></div>

<p>A_Vth是Pelgrom系数（典型5-10 mV·μm）。对于1μm²晶体管，σ_Vth ≈ 5-10 mV。</p>
<p>b) <strong>增益失配</strong>：
源跟随器增益的像素间偏差：</p>
<div class="codehilite"><pre><span></span><code>σ_gain = σ_gm / gm ≈ σ_Vth / (V_gs - V_th)
</code></pre></div>

<p>典型值1-2%，导致响应非均匀性（PRNU）。</p>
<p>c) <strong>暗电流非均匀性（DSNU）</strong>：
各像素暗电流的对数正态分布，标准偏差可达平均值的50-100%。</p>
<p>FPN的影响远超随机噪声，因为人眼对固定图案极其敏感。即使FPN仅为信号的0.5%，也会产生可见的条纹或斑点。3T像素缺乏片内FPN抑制能力，必须依赖：</p>
<ul>
<li>片外数字校正（需要存储校正系数）</li>
<li>双采样技术（需要帧存储器）</li>
<li>工艺优化（成本高昂）</li>
</ul>
<h3 id="424">4.2.4 性能优化策略</h3>
<p><strong>转换增益与动态范围的精细平衡</strong>：</p>
<p>转换增益（Conversion Gain, CG）定义为单个电子产生的电压变化：</p>
<div class="codehilite"><pre><span></span><code>CG = q/C_fd [V/e⁻]
</code></pre></div>

<p>C_fd包含多个成分：</p>
<div class="codehilite"><pre><span></span><code><span class="n">C_fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C_pd</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">C_rst</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">C_sf</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">C_wire</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">C_parasitic</span>
</code></pre></div>

<p>优化策略需要考虑complete的权衡关系：</p>
<ol>
<li>
<p><strong>高转换增益路径</strong>（低光优化）：
   - 最小化C_fd：使用minimum尺寸晶体管，优化布线
   - 典型实现：C_fd &lt; 5fF，CG &gt; 30μV/e⁻
   - 优势：读出噪声降至&lt;5e⁻
   - 代价：满阱容量仅5000-10000 e⁻，动态范围&lt;60dB</p>
</li>
<li>
<p><strong>大动态范围路径</strong>（强光优化）：
   - 增大C_fd：添加显式电容或增大PD面积
   - 典型实现：C_fd &gt; 20fF，CG &lt; 10μV/e⁻
   - 优势：满阱容量&gt;50000 e⁻，动态范围&gt;70dB
   - 代价：读出噪声&gt;20e⁻，低光性能差</p>
</li>
<li>
<p><strong>自适应方案</strong>：
   一些先进设计采用可变转换增益，根据光照条件动态调整：</p>
</li>
</ol>
<ul>
<li>双转换增益（DCG）：通过开关切换额外电容</li>
<li>自动增益控制（AGC）：根据信号电平调整SF偏置</li>
</ul>
<p><strong>源跟随器的多目标优化</strong>：</p>
<p>SF设计涉及增益、带宽、噪声、功耗的四维优化：</p>
<ol>
<li><strong>跨导最大化</strong>：</li>
</ol>
<div class="codehilite"><pre><span></span><code>gm = √(2μ_n × C_ox × (W/L) × I_D)
</code></pre></div>

<p>增大W/L和I_D提高gm，但增加功耗和面积。</p>
<ol start="2">
<li><strong>带宽优化</strong>：</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">BW</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="err">π</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="n">C_load</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">√</span><span class="p">(</span><span class="mi">2</span><span class="err">μ</span><span class="n">_n</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="n">I_D</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">W</span><span class="err">×</span><span class="n">L</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="err">π</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="n">C_load</span><span class="p">)</span>
</code></pre></div>

<p>存在最优W/L比，过大反而降低带宽。</p>
<ol start="3">
<li>
<p><strong>噪声最小化</strong>：
   - 热噪声∝1/√gm，需要大gm
   - 1/f噪声∝1/(WL)，需要大面积
   - 折中方案：W/L ≈ 1-2，面积1-4 μm²</p>
</li>
<li>
<p><strong>功耗约束</strong>：</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>P_pixel = V_DD × I_bias
</code></pre></div>

<p>对于百万像素传感器，即使每像素10μA也产生10W功耗，因此通常采用脉冲偏置或共享偏置策略。</p>
<h2 id="43-4t">4.3 4T像素与相关双采样</h2>
<h3 id="431">4.3.1 传输门的引入</h3>
<p>4T像素架构代表了CMOS图像传感器技术的重大突破。这种架构通过引入传输门（Transfer Gate, TG），巧妙地将光电转换和电荷存储功能分离。4T像素的核心创新在于钳位光电二极管（Pinned Photodiode, PPD）与浮动扩散（Floating Diffusion, FD）的组合，这种设计彻底解决了3T像素的复位噪声问题。</p>
<p><strong>传输门的物理实现</strong>：</p>
<p>传输门是一个特殊设计的MOS晶体管，其作用是控制PPD到FD的电荷转移。不同于普通的开关晶体管，TG需要满足特殊要求：</p>
<ol>
<li><strong>完全转移能力</strong>：TG必须能够将PPD中的所有电荷转移到FD，不留残余</li>
<li><strong>低漏电流</strong>：关断状态下，TG不能有显著的亚阈值漏电</li>
<li><strong>快速开关</strong>：转移时间应远小于行时间，典型&lt;1μs</li>
</ol>
<p>TG的版图设计通常采用“指状”结构，扩展到PPD上方，以最大化控制效率。</p>
<div class="codehilite"><pre><span></span><code>         VDD
          │
    ┌─────┴─────┐
    │    RST    │ 
    └─────┬─────┘
          │
          FD ← 浮动扩散
          │
    ┌─────┴─────┐
    │    TG     │ ← 传输门
    └─────┬─────┘
          │
      ┌───┴───┐
      │  PPD  │ ← 钳位光电二极管
      └───────┘
          │
    ┌─────┴─────┐
    │    SF     │
    └─────┬─────┘
          │
    ┌─────┴─────┐
    │    SEL    │
    └─────┬─────┘
          │
        列线
</code></pre></div>

<h3 id="432-ppd">4.3.2 钳位光电二极管（PPD）优势</h3>
<p>钳位光电二极管是4T像素的核心创新，其独特的结构带来了革命性的性能提升。PPD的名称来源于其表面电势被“钳住”（pinned）在固定电位，这种设计彻底改变了像素的工作方式。</p>
<p><strong>PPD的物理结构</strong>：</p>
<p>PPD采用N-P-P+三层结构，从p型衬底开始：</p>
<ol>
<li><strong>深层N区</strong>：主要的光电转换区域，深度0.5-3μm</li>
<li><strong>中间P区</strong>：耗尽区，提供电场分离电子-空穴对</li>
<li><strong>表面P+层</strong>：高浓度钳位层，压制表面暗电流</li>
</ol>
<p>这种结构的关键优势：</p>
<ul>
<li>表面P+层钳住表面电势，消除Si-SiO₂界面态影响</li>
<li>N区完全耗尽时电势固定，实现无复位噪声读出</li>
<li>内建电场梯度促进电荷收集</li>
</ul>
<p>PPD的能带结构实现了完全电荷转移：</p>
<div class="codehilite"><pre><span></span><code>     TG关闭时              TG开启时
    ┌────────┐           ┌────────┐
    │   FD   │           │   FD   │
    └───┬────┘           └────────┘
        │ 势垒                 ▼ 电荷转移
    ┌───┴────┐           ┌────────┐
    │  PPD   │           │  PPD   │
    │ ●●●●●● │           │        │
    └────────┘           └────────┘
</code></pre></div>

<p>关键特性：</p>
<ul>
<li><strong>完全耗尽</strong>：消除复位噪声</li>
<li><strong>低暗电流</strong>：表面钝化层抑制界面态</li>
<li><strong>高量子效率</strong>：优化的耗尽区深度</li>
</ul>
<h3 id="433-cds">4.3.3 相关双采样（CDS）</h3>
<p>4T像素的真CDS实现：</p>
<div class="codehilite"><pre><span></span><code>时序：
RST  ━━┓  ┏━━━━━━━━━━━━━━━
       ┗━━┛

TG   ━━━━━━━━━┓  ┏━━━━━━━
              ┗━━┛

采样  复位采样   信号采样
     ↓          ↓
Vout ═══╗═══════╗════════
        │       │
        └───────┘
         ΔV = 真实信号
</code></pre></div>

<p>CDS消除的噪声：</p>
<ul>
<li>kTC复位噪声：完全消除</li>
<li>源跟随器偏移：完全消除  </li>
<li>1/f噪声：大部分消除</li>
<li>列FPN：完全消除</li>
</ul>
<h3 id="434-4t">4.3.4 4T像素的性能指标</h3>
<p><strong>关键性能参数</strong>：</p>
<ol>
<li>
<p><strong>量子效率（QE）</strong>：
   - 典型值：50-70%（绿光）
   - 取决于填充因子和PPD设计</p>
</li>
<li>
<p><strong>暗电流</strong>：
   - &lt;10 e⁻/s @ 室温
   - PPD表面钝化效果显著</p>
</li>
<li>
<p><strong>满阱容量</strong>：
   - PPD：10,000-50,000 e⁻
   - 取决于像素尺寸</p>
</li>
<li>
<p><strong>转换增益</strong>：
   - 典型值：50-200 μV/e⁻
   - 与FD电容成反比</p>
</li>
<li>
<p><strong>读出噪声</strong>：
   - &lt;2 e⁻（优化设计）
   - CDS效果关键</p>
</li>
</ol>
<h2 id="44">4.4 共享像素架构</h2>
<h3 id="441-22">4.4.1 2×2共享结构</h3>
<p>为进一步缩小像素尺寸，共享像素架构应运而生：</p>
<div class="codehilite"><pre><span></span><code>    PPD1        PPD2
      │    TG1    │    TG2
      └─────┬─────┘
            │
           FD（共享）
            │
      ┌─────┴─────┐
      │  RST/SF   │
      │   /SEL    │
      └─────┬─────┘
            │
    PPD3    │    PPD4
      │    TG3    │    TG4
      └─────┴─────┘
</code></pre></div>

<p>晶体管数量优化：</p>
<ul>
<li>2×2共享：7T/4像素 = 1.75T/像素</li>
<li>2×1共享：5T/2像素 = 2.5T/像素</li>
<li>4×1共享：7T/4像素 = 1.75T/像素</li>
</ul>
<h3 id="442">4.4.2 读出序列设计</h3>
<p>2×2共享像素的优化读出序列：</p>
<div class="codehilite"><pre><span></span><code><span class="err">步骤</span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="err">复位</span><span class="n">FD</span>
<span class="n">RST</span><span class="w"> </span><span class="err">━━┓</span><span class="w">  </span><span class="err">┏━━━</span>
<span class="w">     </span><span class="err">┗━━┛</span>

<span class="err">步骤</span><span class="mi">2</span><span class="o">-</span><span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="err">依次转移并读出每个</span><span class="n">PPD</span>
<span class="n">TG1</span><span class="w"> </span><span class="err">━━━━┓┏━━━━━━━━━━</span>
<span class="w">       </span><span class="err">┗┛</span>
<span class="n">TG2</span><span class="w"> </span><span class="err">━━━━━━━━┓┏━━━━━━━</span>
<span class="w">           </span><span class="err">┗┛</span>
<span class="n">TG3</span><span class="w"> </span><span class="err">━━━━━━━━━━━━┓┏━━━</span>
<span class="w">               </span><span class="err">┗┛</span>
<span class="n">TG4</span><span class="w"> </span><span class="err">━━━━━━━━━━━━━━━━┓┏</span>
<span class="w">                   </span><span class="err">┗┛</span>
</code></pre></div>

<h3 id="443">4.4.3 串扰分析</h3>
<p>共享架构的串扰机制：</p>
<ol>
<li>
<p><strong>电学串扰</strong>：
   - FD节点共享导致的容性耦合
   - 影响程度：~0.1-1%</p>
</li>
<li>
<p><strong>光学串扰</strong>：
   - 相邻PPD之间的光扩散
   - 取决于像素隔离结构</p>
</li>
<li>
<p><strong>电荷溢出</strong>：
   - 强光下PPD饱和后的溢出
   - 需要溢出保护设计</p>
</li>
</ol>
<h3 id="444">4.4.4 设计权衡</h3>
<p><strong>优点</strong>：</p>
<ul>
<li>更高的填充因子（减少晶体管数量）</li>
<li>更小的像素尺寸可能</li>
<li>降低功耗（共享偏置）</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>复杂的时序控制</li>
<li>潜在的串扰增加</li>
<li>FD电容增大，转换增益降低</li>
<li>非同时曝光（滚动快门伪影）</li>
</ul>
<h2 id="45">4.5 全局快门像素</h2>
<h3 id="451">4.5.1 全局快门原理</h3>
<p>全局快门实现所有像素同时曝光：</p>
<div class="codehilite"><pre><span></span><code>    传统滚动快门              全局快门
    ┌─────────┐              ┌─────────┐
行1 │▓▓▓░░░░░░│          行1 │▓▓▓▓▓░░░░│
行2 │░▓▓▓░░░░░│          行2 │▓▓▓▓▓░░░░│
行3 │░░▓▓▓░░░░│    VS    行3 │▓▓▓▓▓░░░░│
行4 │░░░▓▓▓░░░│          行4 │▓▓▓▓▓░░░░│
    └─────────┘              └─────────┘
      时间 →                   时间 →
</code></pre></div>

<h3 id="452">4.5.2 像素内存储节点</h3>
<p>5T/6T全局快门像素结构：</p>
<div class="codehilite"><pre><span></span><code>         VDD
          │
    ┌─────┴─────┐
    │    RST    │
    └─────┬─────┘
          │
          FD
          │
    ┌─────┴─────┐
    │    TG2    │ ← 存储门
    └─────┬─────┘
          │
         MEM ← 存储节点
          │
    ┌─────┴─────┐
    │    TG1    │ ← 传输门
    └─────┬─────┘
          │
      ┌───┴───┐
      │  PPD  │
      └───────┘
</code></pre></div>

<p>工作流程：</p>
<ol>
<li>全局复位</li>
<li>同时曝光（所有行）</li>
<li>全局转移到存储节点</li>
<li>逐行读出存储电荷</li>
</ol>
<h3 id="453">4.5.3 存储节点设计挑战</h3>
<p><strong>关键设计参数</strong>：</p>
<ol>
<li>
<p><strong>存储电容</strong>：
   - 需足够大以容纳满阱电荷
   - 但增大电容降低转换增益</p>
</li>
<li>
<p><strong>暗电流抑制</strong>：
   - 存储期间的暗电流累积
   - 需要特殊的屏蔽结构</p>
</li>
<li>
<p><strong>寄生光敏感性（PLS）</strong>：</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">PLS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Q_parasitic</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Q_signal</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span>
</code></pre></div>

<ul>
<li>目标：&lt;0.1%</li>
<li>需要金属遮光层</li>
</ul>
<h3 id="454-vs">4.5.4 电压域vs电荷域</h3>
<p><strong>电压域全局快门</strong>：</p>
<ul>
<li>存储节点保持电压信息</li>
<li>需要额外的采样保持电路</li>
<li>功耗较高但噪声性能好</li>
</ul>
<p><strong>电荷域全局快门</strong>：</p>
<ul>
<li>直接存储电荷</li>
<li>结构简单但易受暗电流影响</li>
<li>适合短存储时间应用</li>
</ul>
<h2 id="46">4.6 特殊像素设计</h2>
<h3 id="461-hdr">4.6.1 高动态范围（HDR）像素</h3>
<p><strong>横向溢出集成电容（LOFIC）</strong>：</p>
<div class="codehilite"><pre><span></span><code>      主PPD
        │
    ┌───┴───┐
    │       │
    │  PPD  │──→ 溢出门 ──→ LOFIC
    │       │              （大电容）
    └───────┘
        │
       TG
</code></pre></div>

<p>工作原理：</p>
<ul>
<li>低光：信号存储在PPD（高转换增益）</li>
<li>强光：溢出到LOFIC（低转换增益）</li>
<li>动态范围扩展：&gt;120dB</li>
</ul>
<p><strong>双转换增益（DCG）像素</strong>：</p>
<div class="codehilite"><pre><span></span><code>         FD1（小电容）
          │
    ┌─────┴─────┐
    │    DCG    │ ← 增益切换
    └─────┬─────┘
          │
         FD2（大电容）
</code></pre></div>

<p>模式切换：</p>
<ul>
<li>高增益模式：仅用FD1，低噪声</li>
<li>低增益模式：FD1+FD2，大满阱</li>
</ul>
<h3 id="462-tof">4.6.2 时间飞行（ToF）像素</h3>
<p><strong>单光子雪崩二极管（SPAD）</strong>：</p>
<div class="codehilite"><pre><span></span><code>    ┌──────────┐
    │  Quench  │ ← 淬灭电路
    └────┬─────┘
         │
    ┌────┴────┐
    │  SPAD   │ ← 工作在盖革模式
    └─────────┘
         │
    V_bias &gt; V_breakdown
</code></pre></div>

<p>关键特性：</p>
<ul>
<li>单光子灵敏度</li>
<li>时间分辨率：&lt;100ps</li>
<li>暗计数率：&lt;100 Hz</li>
<li>光子探测效率：&gt;30%</li>
</ul>
<p><strong>电流辅助光子解调（CAPD）</strong>：</p>
<div class="codehilite"><pre><span></span><code>    调制光 ↓
    ┌───────┐
    │  PPD  │
    └───┬───┘
        │
    ┌───┴───┐
    │ Drift │ ← 漂移场调制
    └───┬───┘
      ／  ＼
    FD_A  FD_B
</code></pre></div>

<p>相位测量：</p>
<div class="codehilite"><pre><span></span><code>φ = arctan((C-D)/(A-B))
</code></pre></div>

<p>其中A,B,C,D为四个相位的采样值</p>
<h3 id="463">4.6.3 偏振传感像素</h3>
<p><strong>线栅偏振器集成</strong>：</p>
<div class="codehilite"><pre><span></span><code>   0°   45°   90°  135° ← 偏振角度
  ┌───┬───┬───┬───┐
  │ ║ │ ／ │ ═ │ ＼ │ ← 金属线栅
  ├───┼───┼───┼───┤
  │PPD│PPD│PPD│PPD│
  └───┴───┴───┴───┘
</code></pre></div>

<p>斯托克斯参数计算：</p>
<div class="codehilite"><pre><span></span><code>S0 = I0 + I90           # 总强度
S1 = I0 - I90           # 水平/垂直偏振
S2 = I45 - I135         # 对角偏振
</code></pre></div>

<p>偏振度：</p>
<div class="codehilite"><pre><span></span><code>DoLP = √(S1² + S2²) / S0
</code></pre></div>

<h3 id="464">4.6.4 事件驱动像素</h3>
<p><strong>动态视觉传感器（DVS）</strong>：</p>
<div class="codehilite"><pre><span></span><code>    ┌──────────┐
    │  光电流   │
    └────┬─────┘
         │
    ┌────┴────┐
    │  Log    │ ← 对数转换
    └────┬────┘
         │
    ┌────┴────┐
    │  Diff   │ ← 时间微分
    └────┬────┘
         │
    ┌────┴────┐
    │Threshold│ ← 阈值比较
    └────┬────┘
         │
      Event
</code></pre></div>

<p>事件生成条件：</p>
<div class="codehilite"><pre><span></span><code>|Δlog(I)| &gt; θ → 产生事件
</code></pre></div>

<p>优势：</p>
<ul>
<li>高时间分辨率（μs级）</li>
<li>高动态范围（&gt;120dB）</li>
<li>低数据率（仅传输变化）</li>
<li>低功耗（事件驱动）</li>
</ul>
<h2 id="_1">本章小结</h2>
<p>像素架构的演进反映了CMOS图像传感器技术的不断进步：</p>
<ol>
<li><strong>PPS→3T-APS</strong>：解决了信号衰减问题，引入像素内放大</li>
<li><strong>3T→4T</strong>：通过PPD和CDS彻底消除复位噪声，大幅提升图像质量</li>
<li><strong>独立→共享</strong>：优化像素面积利用率，实现更小像素尺寸</li>
<li><strong>滚动→全局快门</strong>：消除运动伪影，适应高速成像需求</li>
<li><strong>单一→专用功能</strong>：HDR、ToF、偏振等特殊应用推动像素创新</li>
</ol>
<p><strong>关键设计权衡</strong>：</p>
<ul>
<li>填充因子 vs 功能复杂度</li>
<li>转换增益 vs 满阱容量</li>
<li>噪声性能 vs 像素尺寸</li>
<li>帧率 vs 功耗</li>
<li>通用性 vs 专用优化</li>
</ul>
<p><strong>核心性能指标</strong>：</p>
<ul>
<li>量子效率：光电转换效率的度量</li>
<li>读出噪声：决定低光性能</li>
<li>满阱容量：决定动态范围上限</li>
<li>暗电流：影响长曝光性能</li>
<li>转换增益：信号放大能力</li>
</ul>
<h2 id="_2">练习题</h2>
<h3 id="_3">基础题</h3>
<p><strong>4.1</strong> 计算题：一个4T像素的浮动扩散节点电容为10fF，满阱容量为20,000个电子。计算：
a) 转换增益（μV/e⁻）
b) 满阱时的电压摆幅
c) 复位噪声（e⁻ rms）</p>
<details>
<summary>答案</summary>
<p>a) 转换增益 CG = q/C_fd = 1.6×10⁻¹⁹/10×10⁻¹⁵ = 16 μV/e⁻</p>
<p>b) 电压摆幅 V_swing = FWC × CG = 20,000 × 16×10⁻⁶ = 0.32V</p>
<p>c) 复位噪声 N_reset = √(kTC_fd/q²) = √(1.38×10⁻²³×300×10×10⁻¹⁵)/(1.6×10⁻¹⁹) = 4.0 e⁻ rms</p>
</details>
<p><strong>4.2</strong> 分析题：比较3T和4T像素架构，列出各自的主要噪声源，并说明4T像素如何消除复位噪声。</p>
<details>
<summary>答案</summary>
<p>3T像素噪声源：</p>
<ul>
<li>复位噪声（kTC）：无法消除，典型20-50 e⁻</li>
<li>源跟随器热噪声</li>
<li>1/f噪声</li>
<li>固定模式噪声（FPN）</li>
</ul>
<p>4T像素噪声源：</p>
<ul>
<li>源跟随器热噪声</li>
<li>残余1/f噪声（CDS后）</li>
<li>暗电流散粒噪声</li>
</ul>
<p>4T消除复位噪声机制：</p>
<ol>
<li>PPD完全耗尽转移，每次转移后PPD电位固定</li>
<li>CDS采样复位电平和信号电平的差值</li>
<li>复位噪声在两次采样中相同，相减后消除</li>
</ol>
</details>
<p><strong>4.3</strong> 设计题：为2×2共享像素架构设计读出时序，要求实现真CDS。画出RST、TG1-4、采样信号的时序图。</p>
<details>
<summary>答案</summary>
<div class="codehilite"><pre><span></span><code>RST  ━┓┏━━━┓┏━━━┓┏━━━┓┏━━━┓┏━━━
     ┗┛   ┗┛   ┗┛   ┗┛   ┗┛

TG1  ━━━━━━┓┏━━━━━━━━━━━━━━━━━
          ┗┛

TG2  ━━━━━━━━━━━┓┏━━━━━━━━━━━━
              ┗┛

TG3  ━━━━━━━━━━━━━━━┓┏━━━━━━━━
                  ┗┛

TG4  ━━━━━━━━━━━━━━━━━━━┓┏━━━━
                      ┗┛

SHR  ━━┓┏━━━┓┏━━━┓┏━━━┓┏━━━┓┏━
      ┗┛   ┗┛   ┗┛   ┗┛   ┗┛

SHS  ━━━━━━━┓┏━━━┓┏━━━┓┏━━━┓┏━
           ┗┛   ┗┛   ┗┛   ┗┛

     R1 S1 R2 S2 R3 S3 R4 S4
</code></pre></div>

<p>关键点：</p>
<ul>
<li>每个像素独立复位和采样</li>
<li>复位采样在TG脉冲前</li>
<li>信号采样在TG脉冲后</li>
<li>保证CDS时间间隔一致</li>
</ul>
</details>
<h3 id="_4">挑战题</h3>
<p><strong>4.4</strong> 优化题：设计一个HDR像素，要求动态范围&gt;120dB，像素尺寸2.8μm。提出至少两种方案并比较优缺点。</p>
<details>
<summary>答案</summary>
<p>方案1：双转换增益（DCG）</p>
<ul>
<li>结构：标准4T + 额外FD电容切换开关</li>
<li>高增益模式：80dB DR（低光）</li>
<li>低增益模式：80dB DR（强光）</li>
<li>组合DR：&gt;130dB</li>
<li>优点：单次曝光，无运动伪影</li>
<li>缺点：额外晶体管，填充因子降低</li>
</ul>
<p>方案2：横向溢出（LOFIC）</p>
<ul>
<li>结构：PPD + 溢出门 + 大存储电容</li>
<li>PPD范围：80dB</li>
<li>LOFIC范围：60dB</li>
<li>总DR：&gt;120dB</li>
<li>优点：连续响应，结构相对简单</li>
<li>缺点：两个转换增益的匹配校准</li>
</ul>
<p>方案3：子帧HDR</p>
<ul>
<li>短曝光：1ms，捕获高光</li>
<li>长曝光：100ms，捕获暗部</li>
<li>合成DR：&gt;120dB</li>
<li>优点：使用标准4T像素</li>
<li>缺点：运动伪影，帧率降低</li>
</ul>
<p>推荐：2.8μm像素采用DCG方案，平衡性能和复杂度</p>
</details>
<p><strong>4.5</strong> 分析题：全局快门像素的寄生光敏感性（PLS）来源于哪些因素？如何优化设计将PLS降至0.01%以下？</p>
<details>
<summary>答案</summary>
<p>PLS来源：</p>
<ol>
<li>存储节点的直接光照</li>
<li>串扰导致的光生载流子扩散</li>
<li>金属层间隙的光泄漏</li>
<li>衬底反射光</li>
</ol>
<p>优化方案：</p>
<p>结构优化：</p>
<ul>
<li>多层金属遮光（至少3层）</li>
<li>优化金属覆盖率&gt;99.9%</li>
<li>存储节点深埋设计</li>
<li>加入光吸收层</li>
</ul>
<p>电学优化：</p>
<ul>
<li>存储节点周围加保护环</li>
<li>优化势阱设计防止电荷扩散</li>
<li>缩短存储时间（&lt;1ms）</li>
</ul>
<p>工艺优化：</p>
<ul>
<li>深沟槽隔离（DTI）</li>
<li>背照式结构配合遮光层</li>
<li>抗反射涂层减少杂散光</li>
</ul>
<p>验证方法：</p>
<ul>
<li>强光直射测试（100klux）</li>
<li>不同波长PLS表征</li>
<li>温度依赖性测试</li>
</ul>
</details>
<p><strong>4.6</strong> 系统题：设计一个面向自动驾驶应用的像素架构，需要同时支持：高动态范围（&gt;120dB）、全局快门、940nm近红外增强。给出像素结构和关键设计参数。</p>
<details>
<summary>答案</summary>
<p>像素架构：带电压域存储的双增益全局快门</p>
<p>结构设计：</p>
<div class="codehilite"><pre><span></span><code>      厚PPD（NIR优化）
           │
      ┌────┴────┐
      │   TG1   │
      └────┬────┘
           │
      存储电容C1
           │
      ┌────┴────┐
      │   TG2   │
      └────┬────┘
           │
         FD1/FD2（DCG）
           │
      SF + 采样保持
</code></pre></div>

<p>关键参数：</p>
<ol>
<li>
<p>PPD设计：
   - 深度&gt;5μm（940nm吸收）
   - 量子效率@940nm &gt;30%
   - 满阱容量&gt;30ke⁻</p>
</li>
<li>
<p>全局快门：
   - 电压域存储降低PLS
   - 存储时间&lt;5ms
   - PLS&lt;0.05%</p>
</li>
<li>
<p>HDR实现：
   - 双转换增益
   - 高增益：0.1-1000 lux
   - 低增益：1000-100000 lux
   - 组合DR&gt;120dB</p>
</li>
<li>
<p>像素尺寸：
   - 目标：4.2μm
   - 填充因子&gt;40%</p>
</li>
<li>
<p>帧率：
   - 60fps@全局快门
   - 读出噪声&lt;2e⁻@高增益</p>
</li>
</ol>
<p>特殊优化：</p>
<ul>
<li>940nm带通滤光片集成</li>
<li>温度补偿电路（-40~85°C）</li>
<li>冗余像素设计提高可靠性</li>
</ul>
</details>
<p><strong>4.7</strong> 开放题：展望未来5-10年，像素架构可能出现哪些革命性创新？考虑AI集成、量子成像、生物启发等前沿方向。</p>
<details>
<summary>答案</summary>
<p>可能的革命性创新：</p>
<ol>
<li>
<p><strong>神经形态像素</strong>
   - 像素内集成神经元电路
   - 实时特征提取（边缘、运动）
   - 稀疏编码输出
   - 功耗降低100倍</p>
</li>
<li>
<p><strong>量子像素</strong>
   - 单光子计数能力
   - 量子纠缠成像
   - 超分辨率突破衍射极限
   - 量子加密图像传输</p>
</li>
<li>
<p><strong>计算像素</strong>
   - 像素内CNN卷积运算
   - 可编程像素功能
   - 自适应曝光控制
   - 压缩感知集成</p>
</li>
<li>
<p><strong>生物启发设计</strong>
   - 仿视网膜分层处理
   - 局部适应性增益
   - 色觉恒常性实现
   - 极化视觉集成</p>
</li>
<li>
<p><strong>3D堆叠像素</strong>
   - 感光层/存储层/计算层垂直集成
   - 像素内存算一体
   - 超高填充因子（&gt;90%）
   - 多光谱同时采集</p>
</li>
<li>
<p><strong>自修复像素</strong>
   - 缺陷自动检测
   - 冗余电路切换
   - 老化补偿
   - 10年以上寿命</p>
</li>
</ol>
<p>关键使能技术：</p>
<ul>
<li>先进制程（&lt;7nm）</li>
<li>新材料（钙钛矿、量子点）</li>
<li>异质集成</li>
<li>AI协同设计</li>
</ul>
</details>
<h2 id="_5">常见陷阱与错误</h2>
<h3 id="_6">设计陷阱</h3>
<ol>
<li>
<p><strong>转换增益过度优化</strong>
   - 错误：盲目减小FD电容追求高转换增益
   - 后果：满阱容量严重不足，动态范围受限
   - 正解：平衡转换增益和满阱容量，典型CG×FWC≈1V</p>
</li>
<li>
<p><strong>共享像素的FD电容忽视</strong>
   - 错误：未考虑多个TG连接增加的寄生电容
   - 后果：转换增益显著低于预期
   - 正解：仔细提取寄生，优化布局减小连线</p>
</li>
<li>
<p><strong>全局快门的功耗低估</strong>
   - 错误：忽略所有像素同时工作的峰值电流
   - 后果：电源压降，图像均匀性问题
   - 正解：加强电源网格，分区供电</p>
</li>
<li>
<p><strong>PPD势阱设计不当</strong>
   - 错误：势阱过浅或梯度不足
   - 后果：电荷转移不完全，图像滞后
   - 正解：TCAD仿真优化，确保完全转移</p>
</li>
</ol>
<h3 id="_7">测试盲点</h3>
<ol>
<li>
<p><strong>串扰测试不充分</strong>
   - 常见遗漏：只测试相邻像素，忽略对角串扰
   - 正确方法：点光源扫描，完整串扰矩阵</p>
</li>
<li>
<p><strong>温度特性忽视</strong>
   - 常见遗漏：只在室温测试
   - 正确方法：-40°C到85°C完整表征</p>
</li>
<li>
<p><strong>长期稳定性</strong>
   - 常见遗漏：未进行老化测试
   - 正确方法：加速老化，热循环测试</p>
</li>
</ol>
<h3 id="_8">调试技巧</h3>
<ol>
<li>
<p><strong>FPN问题定位</strong>
   - 列FPN：检查列级电路匹配
   - 行FPN：检查行驱动和电源
   - 像素FPN：工艺均匀性问题</p>
</li>
<li>
<p><strong>图像滞后诊断</strong>
   - 测试方法：强光脉冲后的残像
   - 原因定位：PPD设计/TG驱动/时序</p>
</li>
<li>
<p><strong>噪声源分离</strong>
   - 暗场测试：分离读出噪声
   - 不同增益：分离各级噪声贡献
   - 频谱分析：识别1/f和白噪声</p>
</li>
</ol>
<h2 id="_9">最佳实践检查清单</h2>
<h3 id="_10">像素设计审查</h3>
<ul>
<li>[ ] <strong>填充因子优化</strong></li>
<li>光电二极管面积最大化</li>
<li>晶体管尺寸合理</li>
<li>
<p>金属走线优化</p>
</li>
<li>
<p>[ ] <strong>噪声预算分配</strong></p>
</li>
<li>读出噪声&lt;2e⁻（低光应用）</li>
<li>暗电流&lt;10e⁻/s（室温）</li>
<li>
<p>FPN&lt;0.5%（PRNU）</p>
</li>
<li>
<p>[ ] <strong>动态范围设计</strong></p>
</li>
<li>满阱容量满足要求</li>
<li>转换增益合理</li>
<li>
<p>HDR方案选择恰当</p>
</li>
<li>
<p>[ ] <strong>串扰抑制</strong></p>
</li>
<li>像素间隔离结构</li>
<li>金属屏蔽层设计</li>
<li>势阱优化防溢出</li>
</ul>
<h3 id="_11">版图设计要点</h3>
<ul>
<li>[ ] <strong>对称性</strong></li>
<li>关键器件匹配对称</li>
<li>差分信号路径平衡</li>
<li>
<p>热分布均匀</p>
</li>
<li>
<p>[ ] <strong>屏蔽与隔离</strong></p>
</li>
<li>敏感节点屏蔽</li>
<li>电源/地线隔离</li>
<li>
<p>保护环设计</p>
</li>
<li>
<p>[ ] <strong>寄生最小化</strong></p>
</li>
<li>FD节点寄生电容</li>
<li>关键路径RC延迟</li>
<li>耦合路径识别</li>
</ul>
<h3 id="_12">可制造性考虑</h3>
<ul>
<li>[ ] <strong>工艺兼容性</strong></li>
<li>标准CMOS工艺</li>
<li>特殊工艺步骤最少</li>
<li>
<p>成本可控</p>
</li>
<li>
<p>[ ] <strong>良率因素</strong></p>
</li>
<li>设计规则裕量</li>
<li>工艺偏差容限</li>
<li>
<p>冗余和修复机制</p>
</li>
<li>
<p>[ ] <strong>测试覆盖</strong></p>
</li>
<li>内建自测试</li>
<li>关键参数可测</li>
<li>故障定位能力</li>
</ul>
<h3 id="_13">系统集成检查</h3>
<ul>
<li>[ ] <strong>接口兼容</strong></li>
<li>时序满足要求</li>
<li>电平匹配</li>
<li>
<p>驱动能力充足</p>
</li>
<li>
<p>[ ] <strong>功耗预算</strong></p>
</li>
<li>静态功耗</li>
<li>动态功耗</li>
<li>
<p>待机模式</p>
</li>
<li>
<p>[ ] <strong>可靠性设计</strong></p>
</li>
<li>ESD保护</li>
<li>闩锁预防</li>
<li>热管理方案</li>
</ul>
            </article>
            
            <nav class="page-nav"><a href="chapter3.html" class="nav-link prev">← 第3章：光电二极管与像素理论</a><a href="chapter5.html" class="nav-link next">第5章：读出电路设计 →</a></nav>
        </main>
    </div>
</body>
</html>