# 第2章：MOS器件物理与CMOS工艺

本章深入探讨CMOS图像传感器的器件物理基础和制造工艺。我们将从MOS电容的基本原理出发，逐步深入到MOSFET的工作机制，然后介绍CMOS工艺流程。对于图像传感器设计者来说，理解器件物理和工艺约束是优化像素性能、降低噪声、提高量子效率的关键。本章还将讨论器件缩放带来的挑战、各种寄生效应的影响，以及工艺偏差对电路匹配性的影响。

## 2.1 MOS电容与阈值电压

### 2.1.1 MOS电容结构与能带图

MOS（Metal-Oxide-Semiconductor）电容是MOSFET的核心结构，也是理解CMOS图像传感器中电荷存储和转移的基础。一个典型的MOS电容由三层组成：金属栅极、绝缘氧化层和半导体衬底。

```
        Gate (栅极) - Metal or Poly-Si
    =====================================
    |     SiO₂ (氧化层) - Insulator     | tox (2-10nm)
    =====================================
    |                                   |
    |   Si Substrate (硅衬底)           | 
    |   p-type or n-type doping         |
    |   NA = 10¹⁵-10¹⁷ cm⁻³             |
    =====================================
        Body Contact (衬底接触)
```

#### 能带结构基础

在分析MOS电容之前，需要理解几个关键的能级概念：
- **真空能级（Evac）**：电子完全脱离材料的能量参考点
- **功函数（φ）**：费米能级到真空能级的能量差
- **电子亲和势（χ）**：导带底到真空能级的能量差
- **禁带宽度（Eg）**：硅的Eg = 1.12 eV（室温）

金属和半导体的功函数差异是MOS器件工作的基础：
- 铝栅：φM ≈ 4.1 eV
- n+多晶硅：φM ≈ 4.15 eV  
- p+多晶硅：φM ≈ 5.25 eV
- p型硅衬底：φS = χ + Eg/2 + φF ≈ 4.9 eV（NA = 10¹⁶ cm⁻³）

#### 热平衡下的能带图

在热平衡状态下，MOS电容的能带图取决于栅极电压VG。根据VG的不同，MOS电容可以工作在四种状态：

1. **积累（Accumulation）**：VG < VFB（对于p型衬底）
   - 负栅压吸引空穴到Si-SiO₂界面
   - 多数载流子（空穴）在界面积累形成高浓度层
   - 能带向上弯曲，表面费米能级接近价带
   - 电容接近氧化层电容Cox
   - 应用：MOS电容器的电荷存储状态

2. **平带（Flat Band）**：VG = VFB
   - 能带无弯曲，呈平直状态
   - 表面载流子浓度等于体内浓度
   - 平带电压VFB = φMS - Qox/Cox
   - 典型值：VFB ≈ -0.9V（铝栅/p-Si）

3. **耗尽（Depletion）**：VFB < VG < VTH
   - 正栅压排斥空穴，形成耗尽区
   - 耗尽区宽度：xd = √(2εsψs/qNA)
   - 能带适度向下弯曲，表面势ψs > 0
   - 电容由氧化层和耗尽层电容串联决定
   - 最大耗尽宽度：xdmax = √(4εsφF/qNA)

4. **反型（Inversion）**：VG > VTH
   - 表面势ψs > 2φF时进入强反型
   - 少数载流子（电子）在界面形成反型层
   - 反型层厚度极薄（~1-10 nm）
   - 能带强烈弯曲，表面费米能级接近导带
   - 电容特性取决于测量频率

### 2.1.2 阈值电压的物理意义

阈值电压VTH是MOS器件最重要的参数之一，定义为使硅表面从耗尽转变为强反型的最小栅极电压。在CMOS图像传感器中，精确控制阈值电压对于实现低噪声读出和高动态范围至关重要。

#### 阈值电压的推导

从电荷平衡出发，栅极电荷必须等于氧化层电荷、耗尽区电荷和反型层电荷之和：

```
QG = Qox + Qd + Qn
```

在阈值点，反型层刚开始形成（Qn ≈ 0），表面势ψs = 2φF：

```
VTH = VFB + 2φF + Qd,max/Cox
    = VFB + 2φF + (√(4εsqNAφF))/Cox
```

详细参数说明：
- **VFB（平带电压）**：VFB = φMS - Qox/Cox
  - φMS：金属-半导体功函数差，典型值-0.9V到+0.3V
  - Qox：氧化层固定电荷密度，典型值10¹⁰-10¹¹ cm⁻²
  
- **φF（费米势）**：φF = (kT/q)ln(NA/ni)
  - 室温下kT/q = 26 mV
  - 本征载流子浓度ni = 1.5×10¹⁰ cm⁻³（300K）
  - 对于NA = 10¹⁶ cm⁻³，φF ≈ 0.35V
  
- **耗尽区电荷项**：√(4εsqNAφF)/Cox
  - εs = 11.7ε0 = 1.04×10⁻¹² F/cm（硅的介电常数）
  - Cox = εox/tox，其中εox = 3.9ε0
  - 此项随√NA增长，体现了衬底掺杂的影响

#### 阈值电压的典型值

不同器件类型的典型VTH值：

| 器件类型 | 栅极材料 | 衬底掺杂 | VTH范围 |
|---------|---------|---------|---------|
| NMOS增强型 | n+多晶硅 | p型10¹⁶ | 0.3-0.7V |
| PMOS增强型 | p+多晶硅 | n型10¹⁶ | -0.3--0.7V |
| NMOS耗尽型 | n+多晶硅 | p型+注入 | -3--1V |
| 原生NMOS | n+多晶硅 | 轻掺p型 | 0-0.2V |

#### 图像传感器中的阈值电压控制

在CMOS图像传感器中，不同功能的晶体管需要不同的VTH：

1. **传输门（Transfer Gate）**
   - 需要负VTH实现完全电荷转移
   - 通过埋沟注入实现VTH ≈ -1V到0V
   
2. **源跟随器（Source Follower）**
   - 标准VTH ≈ 0.5-0.7V
   - 过低会增加亚阈值泄漏
   
3. **复位晶体管（Reset Transistor）**
   - 需要低VTH减小复位噪声
   - 典型值0.3-0.5V
   
4. **选择晶体管（Select Transistor）**
   - 标准或略高VTH改善关断特性
   - 典型值0.5-0.8V

### 2.1.3 体效应与阈值电压调制

在实际电路中，晶体管的源极和衬底往往不在同一电位，产生源-衬底偏置VSB。这种偏置会调制阈值电压，称为体效应（Body Effect）或背栅效应（Back-Gate Effect）。这一效应在CMOS图像传感器的多个关键电路中产生重要影响，特别是在像素内的源跟随器放大器中。

#### 体效应的物理机制

当VSB > 0时（源极电位高于衬底）：
1. 耗尽区宽度增加：xd ∝ √(2φF + VSB)
2. 耗尽区电荷增加：Qd增大
3. 需要更高的栅压才能达到强反型
4. 阈值电压增加

体效应的定量描述：
```
VTH = VTH0 + γ(√(2φF + VSB) - √(2φF))
```

其中体效应系数γ：
```
γ = (√(2qεsNA))/Cox = (tox/εox)√(2qεsNA)
```

典型值：
- 薄氧工艺（tox = 5nm）：γ ≈ 0.3-0.4 V^(1/2)
- 厚氧工艺（tox = 10nm）：γ ≈ 0.5-0.7 V^(1/2)

#### 体效应对电路性能的影响

1. **跨导退化**
   ```
   gm,eff = gm0/(1 + γ/(2√(2φF + VSB)))
   ```
   VSB增加导致有效跨导降低

2. **亚阈值摆幅增加**
   ```
   n = 1 + γ/(2√(2φF + VSB))
   SS = n × (kT/q)ln(10)
   ```
   体效应使亚阈值特性变差

3. **输出摆幅限制**
   - 源跟随器：Vout,max = VDD - VTH(VSB)
   - 体效应限制了最大输出电压

#### CMOS图像传感器中的体效应

体效应在图像传感器的多个关键电路中产生重要影响：

1. **像素源跟随器（SF）**
   ```
   源跟随器配置：
   VDD ----+
          |
          RL (负载)
          |
   Vout --+-- Source
          |
         SF晶体管
          |
   Vin ---Gate
   
   VSB = Vout > 0，产生体效应
   ```
   
   影响：
   - 转换增益降低：AV = gm/(gm + gmb + gds) < 1
   - 非线性失真：VTH随Vout变化
   - 动态范围减小：输出摆幅受限

2. **复位晶体管**
   - 软复位时VSB = VFD - VSS
   - 体效应影响复位电平
   - 导致图像滞后（lag）

3. **共享像素架构**
   - 不同像素的VSB不同
   - 引起像素间失配
   - 需要calibration补偿

#### 体效应的抑制技术

1. **电路技术**
   - 采用PMOS源跟随器（n阱中）
   - 源极和衬底短接（牺牲面积）
   - 自举（bootstrap）技术

2. **工艺技术**
   - 降低衬底掺杂NA
   - 采用SOI（绝缘体上硅）
   - 三阱工艺隔离

3. **系统补偿**
   - 数字域非线性校正
   - 查找表（LUT）补偿
   - 自适应偏置调整

### 2.1.4 MOS电容的C-V特性

MOS电容的电容-电压（C-V）特性是理解和表征MOS器件的重要工具。C-V曲线反映了不同偏压下的电荷分布和载流子响应特性，对于优化图像传感器的电荷存储和转移至关重要。在图像传感器设计中，精确理解C-V特性有助于优化浮动扩散节点电容、光电二极管的电荷存储能力以及传输门的电荷转移效率。

#### 理想C-V特性

MOS电容可以等效为氧化层电容Cox与半导体电容Cs的串联：

```
1/C = 1/Cox + 1/Cs
```

不同工作区的电容特性：

1. **积累区（VG < VFB）**
   - Cs → ∞（多数载流子响应快）
   - C ≈ Cox
   - 电容达到最大值

2. **耗尽区（VFB < VG < VTH）**
   - Cs = εs/xd（耗尽层电容）
   - C = CoxCs/(Cox + Cs)
   - 电容随VG增加而减小

3. **反型区（VG > VTH）**
   - 低频：Cs → ∞（少数载流子能响应）
   - 高频：Cs = εs/xdmax（少数载流子不能响应）
   - 频率依赖性明显

```
         C/Cox
           ↑
      1.0  |=========              低频
           |         \
           |          \
           |           \___________  高频
     Cmin  |                      
     /Cox  |                      
           |
           +---+---+---+---+---→ VG
          VFB  0  VTH  VTH+1V
```

#### 频率响应特性

测量频率对C-V曲线的影响：

1. **低频（< 100 Hz）**
   - 少数载流子通过产生-复合响应
   - 反型区电容恢复到Cox
   - 准静态C-V曲线

2. **高频（> 1 MHz）**
   - 少数载流子无法跟随
   - 反型区电容保持在最小值
   - Cmin/Cox = 1/(1 + εox×xdmax/(εs×tox))

3. **深耗尽（脉冲测量）**
   - 快速电压变化
   - 少数载流子来不及产生
   - 耗尽区延伸超过平衡值

#### 非理想效应

实际MOS电容的C-V特性受多种因素影响：

1. **界面态的影响**
   ```
   Dit引起的电容：Cit = q²Dit
   总电容：1/C = 1/Cox + 1/(Cs + Cit)
   ```
   - C-V曲线展宽
   - 频率色散现象

2. **氧化层电荷的影响**
   - 固定电荷Qf：平移C-V曲线
   - 可动电荷Qm：滞回现象
   - 陷阱电荷Qt：时间依赖性

3. **量子效应**
   - 超薄氧化层（< 3nm）
   - 反型层量子化
   - 有效氧化层厚度增加

4. **多晶硅耗尽**
   - 栅极耗尽效应
   - 等效氧化层厚度增加
   - 电容进一步降低

#### 图像传感器中的应用

C-V特性在CMOS图像传感器设计中的重要应用：

1. **浮动扩散节点（FD）电容**
   - 决定转换增益CG = q/CFD
   - CFD包括：结电容 + 栅电容 + 互连电容
   - 典型值：0.5-5 fF

2. **钳位光电二极管（PPD）**
   - 完全耗尽状态工作
   - 电容随偏压变化小
   - 良好的电荷-电压线性度

3. **传输门（TG）控制**
   - 利用深耗尽转移电荷
   - 脉冲驱动避免界面态影响
   - 优化上升/下降时间

4. **电容匹配设计**
   - 列读出电路的采样电容
   - CDS电路的存储电容
   - 需要精确匹配减小FPN

## 2.2 MOSFET工作原理

### 2.2.1 MOSFET基本结构

MOSFET（Metal-Oxide-Semiconductor Field-Effect Transistor）是CMOS技术的基础器件。理解其结构和工作原理对于设计高性能图像传感器至关重要。

#### NMOS晶体管结构

```
         Source              Gate              Drain
            S        G=====================G      D
            |        |                     |      |
         n+ |        |    Gate Oxide      |      | n+
    ========|        |      (SiO₂)        |      |========
            |        |_____________________|      |
            |                                     |
            |  LDD    Channel Region    LDD      |
            |<---->|<----------------->|<---->   |
            |           p-substrate               |
            |              (NA~10¹⁶)              |
            =======================================
                         Body (B)
    
    关键尺寸：
    - Ldrawn：版图沟道长度
    - Leff = Ldrawn - 2ΔL：有效沟道长度
    - W：沟道宽度
    - xj：源漏结深（20-100nm）
    - tox：栅氧厚度（2-10nm）
```

#### 详细结构参数

1. **沟道区域**
   - 长度L：决定短沟道效应的严重程度
   - 宽度W：决定驱动能力
   - 有效长度：Leff = Ldrawn - 2LD
   - 横向扩散LD：约0.7×xj

2. **源漏区**
   - 重掺杂n+：~10²⁰ cm⁻³（As或P）
   - LDD（轻掺杂漏）：~10¹⁸ cm⁻³
   - 接触电阻：< 10 Ω·μm²
   - 硅化物降低串联电阻

3. **栅极结构**
   - 传统：n+多晶硅（功函数~4.15eV）
   - 现代：金属栅（TiN, TaN等）
   - 栅氧：SiO₂或高k材料（HfO₂）
   - 侧墙：Si₃N₄，宽度50-100nm

4. **隔离结构**
   - STI（浅沟槽隔离）深度：300-400nm
   - 防止器件间漏电
   - 引入应力影响性能

#### PMOS晶体管差异

PMOS与NMOS的主要区别：

```
PMOS结构特点：
- n型阱或n型衬底
- p+源漏掺杂（B或BF₂）
- 空穴导电，迁移率较低
- μp ≈ μn/2.5
- 需要更大W/L获得相同电流
```

#### 三维效应

现代小尺寸器件的三维效应不可忽略：

1. **窄宽度效应**
   - STI边缘的额外耗尽
   - VTH随W减小而增加
   - ΔVTH ∝ 1/W

2. **反短沟道效应**
   - Halo注入引起
   - 某些L下VTH反而降低
   - 需要精确工艺控制

3. **应力效应**
   - STI引入的压应力
   - 硅化物的拉应力
   - 金属层的热应力

### 2.2.2 MOSFET的I-V特性

MOSFET的漏极电流ID取决于工作区，准确理解各工作区的电流特性对于像素电路设计至关重要。

#### 线性区（三极管区）

当VDS < VGS - VTH时，沟道从源到漏连续存在：

```
ID = μnCox(W/L)[(VGS - VTH)VDS - VDS²/2]
```

线性区特性：
- 晶体管表现为压控电阻
- 小VDS时：RDS ≈ 1/[μnCox(W/L)(VGS - VTH)]
- 应用：传输门、模拟开关
- 在像素复位操作中，复位晶体管工作在此区

#### 饱和区（有源区）

当VDS ≥ VGS - VTH时，沟道在漏端夹断：

```
ID = (μnCox/2)(W/L)(VGS - VTH)²(1 + λVDS)
```

饱和区特性：
- 晶体管作为电流源
- 平方律关系（长沟道）
- λ效应表示沟道长度调制
- 典型λ值：0.01-0.1 V⁻¹
- 应用：放大器、电流镜
- 像素源跟随器工作在此区

沟道长度调制的物理机制：
```
ΔL/L ≈ √(2εs(VDS - VDSsat)/(qNAL²))
λ ≈ 1/(VAL) ≈ 1/(L×EA)
```
其中EA是特征电场，约5×10⁴ V/cm。

#### 亚阈值区（弱反型区）

当VGS < VTH时，晶体管并未完全关断：

```
ID = I0(W/L)exp(q(VGS - VTH)/nkT)[1 - exp(-qVDS/kT)]
```

亚阈值特性：
- 指数关系而非平方律
- n = 1 + Cd/Cox，典型值1.3-1.5
- 亚阈值摆幅：SS = n(kT/q)ln(10) ≈ 60-90 mV/dec
- I0 = μnCox(n-1)(kT/q)²
- 对温度极其敏感
- 暗电流的主要来源

#### 速度饱和效应

在短沟道器件中，当电场超过临界值Ec时，载流子速度饱和：

```
μeff = μ0/[1 + (VGS - VTH)/(EcL)]
```

影响：
- ID不再遵循平方律
- 更接近线性关系：ID ∝ (VGS - VTH)
- 临界电场Ec ≈ 1.5×10⁴ V/cm（电子）
- 饱和速度vsat ≈ 10⁷ cm/s

#### 深三极管区操作

当VDS << 2(VGS - VTH)时，电流公式简化为：

```
ID ≈ μnCox(W/L)(VGS - VTH)VDS = VDS/Ron
```

其中导通电阻：
```
Ron = 1/[μnCox(W/L)(VGS - VTH)]
```

这在开关应用中非常重要，如像素选择开关。

### 2.2.3 跨导与输出电导

跨导和输出电导是表征MOSFET交流特性的关键参数，直接影响放大器增益、带宽和噪声性能。

#### 跨导（Transconductance）

跨导gm定义为漏极电流对栅源电压的偏导数：

**饱和区跨导**：
```
gm = ∂ID/∂VGS|VDS=const
   = μnCox(W/L)(VGS - VTH)
   = √(2μnCox(W/L)ID)
   = 2ID/(VGS - VTH)
```

三种表达式的应用场景：
1. 第一式：设计阶段，已知器件尺寸和偏置
2. 第二式：已知电流，求gm（常用于偏置设计）
3. 第三式：效率分析，gm/ID是关键指标

**亚阈值区跨导**：
```
gm = ID/(nVT) = qID/(nkT)
```
其中VT = kT/q ≈ 26 mV（室温）

**跨导效率（gm/ID）**：
- 饱和区：gm/ID = 2/(VGS - VTH)
- 亚阈值区：gm/ID = 1/(nVT) ≈ 25 V⁻¹
- 弱反型区具有最高效率
- 像素SF设计常在moderate inversion获得平衡

#### 输出电导（Output Conductance）

输出电导gds（或g0）表征漏极电压对电流的影响：

```
gds = ∂ID/∂VDS|VGS=const = λID
```

输出电阻：
```
rds = 1/gds = 1/(λID) = VA/ID
```

其中VA = 1/λ是Early电压，类比双极晶体管。

**短沟道器件的gds**：

短沟道效应导致gds增大：
1. DIBL效应：VTH随VDS降低
2. CLM效应：有效沟道长度减小
3. 热载流子效应：迁移率退化

经验公式：
```
gds = ID × (λ0 + λL/L + λV×VDS)
```

#### 本征增益

单管放大器的最大电压增益由本征增益决定：

```
AV,max = gm × rds = gm/gds
```

饱和区：
```
AV,max = 2/(λ(VGS - VTH)) ≈ 2VA/(VGS - VTH)
```

典型值：
- 长沟道：AV,max ≈ 50-100
- 短沟道：AV,max ≈ 10-30
- 亚阈值区：可达100-1000

#### 源跟随器应用

在像素源跟随器中：

```
电压增益：AV = gm/(gm + gmb + gds + GL)
```

其中：
- gmb = ηgm：体效应跨导，η ≈ 0.2-0.3
- GL：负载电导

为获得高增益：
- 最大化gm：增大W/L或ID
- 最小化gds：使用长沟道
- 减小gmb：降低衬底掺杂
- 优化负载：电流源负载优于电阻

### 2.2.4 小信号模型

小信号模型是分析MOSFET交流特性的基础工具，对于理解像素读出电路的频率响应和噪声特性至关重要。

#### 基本小信号等效电路

```
    G o----||----+----||----o D
          Cgd    |    Cdb
                 |
            gmVgs ↓ rds
                 |
    S o----||----+----||----o S
          Cgs         Csb
    
    B o----||--------||-----o B
          Cgb        (衬底)
```

#### 本征电容

MOSFET的电容分为本征电容和寄生电容：

**栅电容分配（饱和区）**：
```
Cgg,total = WLCox
Cgs = (2/3)WLCox + WCov
Cgd = WCov
Cgb ≈ 0（强反型）
```

**栅电容分配（线性区）**：
```
Cgs = Cgd = (1/2)WLCox + WCov
Cgb ≈ 0
```

**栅电容分配（截止区）**：
```
Cgs = Cgd = WCov
Cgb = WLCox（串联耗尽电容）
```

其中Cov是栅-源/漏重叠电容：
```
Cov = LD × Cox
LD ≈ 0.7 × xj（横向扩散长度）
```

#### 结电容

源/漏与衬底形成的PN结电容：

```
Csb = Cj × AS + Cjsw × PS
Cdb = Cj × AD + Cjsw × PD
```

其中：
- Cj：单位面积结电容（fF/μm²）
- Cjsw：单位周长侧墙电容（fF/μm）
- AS/AD：源/漏面积
- PS/PD：源/漏周长

电压依赖性：
```
Cj(V) = Cj0/[1 + V/φbi]^m
```
- φbi：内建电势（~0.7-0.9V）
- m：梯度系数（~0.3-0.5）

#### 完整小信号模型

包含所有寄生元件的模型：

```
    G o--Rg--+----||----+----||----Rs----o D
             |   Cgd    |    Cdb    |
             |          |           Rd
             |     gmVgs↓ rds       |
    S o------+----||----+----||----+-----o S
                 Cgs         Csb
```

寄生电阻：
- Rg：栅极电阻（多晶硅）~10-100Ω
- Rs/Rd：源/漏串联电阻~10-100Ω
- 影响：降低有效gm，增加噪声

#### 频率响应

**单位增益频率（fT）**：
```
fT = gm/(2π(Cgs + Cgd))
   ≈ gm/(2πCgg)
   ≈ (3/2) × μn(VGS - VTH)/(2πL²)
```

短沟道近似：
```
fT ≈ vsat/(2πL)
```

**最大振荡频率（fmax）**：
```
fmax = fT/[2√(Rg(gds + 2πfTCgd))]
```

#### 噪声模型

小信号模型需要增加噪声源：

1. **热噪声**：
   ```
   i²n,th = 4kTγgds0 Δf
   ```
   其中γ = 2/3（长沟道），γ > 1（短沟道）

2. **闪烁噪声（1/f）**：
   ```
   v²n,1/f = (Kf/(WLCoxf)) Δf
   ```

3. **栅噪声**（高频）：
   ```
   i²g = 4kTδgg Δf
   ```
   其中gg = (ω²C²gs)/(5gds0)

#### 像素电路应用

**源跟随器带宽分析**：

考虑负载电容CL的3dB带宽：
```
f3dB = gm/(2π(CL + Cgd(1 + gm/GL)))
```

Miller效应使Cgd被放大(1 + AV)倍。

**采样开关的导通电阻**：
```
Ron = 1/[μnCox(W/L)(VGS - VTH - VDS/2)]
```

RC时间常数决定采样速度：
```
τ = Ron × Csample
```

**噪声带宽积**：
```
NBW = (π/2) × f3dB
```

用于计算总积分噪声。

## 2.3 CMOS工艺流程概述

### 2.3.1 标准CMOS工艺步骤

现代CMOS图像传感器通常采用双阱或三阱工艺，主要步骤包括：

1. **衬底准备**
   - p型硅片，晶向<100>，电阻率10-20 Ω·cm
   - 初始氧化，形成保护层

2. **阱区形成**
   ```
   光刻 → 离子注入 → 退火
   N阱：磷注入，能量100-200 keV，剂量1e13 cm⁻²
   P阱：硼注入，能量50-100 keV，剂量1e13 cm⁻²
   ```

3. **隔离结构**
   - STI（浅沟槽隔离）：刻蚀→氧化物填充→CMP平坦化
   - 深度：300-400 nm
   - 宽度：0.2-0.5 μm

4. **栅极形成**
   ```
   栅氧生长（干氧，850°C）→ 多晶硅沉积 → 掺杂 → 光刻 → 刻蚀
   栅氧厚度：2-5 nm（取决于工艺节点）
   多晶硅厚度：150-200 nm
   ```

5. **源漏形成**
   - LDD（轻掺杂漏）注入：降低热载流子效应
   - 侧墙形成：氮化硅沉积→各向异性刻蚀
   - 源漏重掺杂：As（NMOS）或BF₂（PMOS）

6. **硅化物与接触**
   - 自对准硅化物（Salicide）：Co或Ti
   - 接触孔刻蚀与钨填充

7. **金属互连**
   - 多层金属（3-8层）
   - 铜大马士革工艺
   - 低k介电材料

### 2.3.2 CMOS图像传感器特殊工艺

相比标准CMOS，图像传感器需要额外工艺步骤：

1. **光电二极管形成**
   ```
   N型注入（光电二极管）
   ↓
   P+钳位层注入（减少暗电流）
   ↓
   退火优化（界面态最小化）
   ```

2. **微透镜阵列**
   - 彩色滤光片（CFA）涂覆
   - 微透镜材料沉积
   - 热回流成型

3. **背照式（BSI）工艺**（如适用）
   - 晶圆减薄至3-5 μm
   - 背面钝化
   - 抗反射涂层

### 2.3.3 关键工艺参数控制

对图像传感器性能影响最大的工艺参数：

1. **界面态密度**
   - 目标：< 1e10 cm⁻²eV⁻¹
   - 影响：暗电流、1/f噪声

2. **掺杂浓度均匀性**
   - 变化：< ±5%
   - 影响：FPN（固定模式噪声）

3. **氧化层质量**
   - 针孔密度：< 0.01 cm⁻²
   - 影响：良率、可靠性

## 2.4 器件缩放理论

### 2.4.1 恒场缩放（Constant Field Scaling）

Dennard缩放规则保持电场强度不变：

| 参数 | 缩放因子 | 影响 |
|------|---------|------|
| 器件尺寸（L, W, tox） | 1/k | 集成度提高k² |
| 电压（VDD, VTH） | 1/k | 功耗降低 |
| 掺杂浓度（NA, ND） | k | 抑制短沟道效应 |
| 电流（ID） | 1/k | 单管功耗降低k² |
| 电容（C） | 1/k | 速度提升 |
| 延迟（τ） | 1/k | 性能提升 |
| 功耗密度 | 1 | 保持恒定 |

### 2.4.2 恒压缩放（Constant Voltage Scaling）

实际中电压缩放受限，导致：
- 电场增强：可靠性问题
- 功耗密度增加：k³
- 需要新材料和结构创新

### 2.4.3 像素缩放的特殊挑战

图像传感器像素缩放面临独特挑战：

1. **光学限制**
   ```
   衍射极限：d = 1.22λf/D
   像素尺寸接近可见光波长（400-700 nm）
   ```

2. **满阱容量（FWC）缩放**
   ```
   FWC ∝ 像素面积 × 耗尽区深度
   缩放因子：1/k² 到 1/k³
   动态范围降低：20log(1/k) dB
   ```

3. **串扰增加**
   - 光学串扰：∝ 1/像素间距
   - 电学串扰：载流子扩散长度不缩放

4. **量子效率维持**
   - 需要更薄的多晶硅栅
   - 背照式结构成为必需

### 2.4.4 缩放策略与创新

应对缩放挑战的技术创新：

1. **3D集成**
   - 像素与电路分离
   - 堆叠式传感器

2. **新材料**
   - 高k栅介质
   - 金属栅极
   - III-V族光电材料

3. **架构创新**
   - 共享像素降低晶体管数
   - 非拜耳CFA模式

## 2.5 寄生效应与二级效应

### 2.5.1 短沟道效应

当沟道长度L接近耗尽区宽度时，出现：

1. **阈值电压滚降（VTH Roll-off）**
   ```
   ΔVTH ∝ exp(-L/λc)
   其中λc是特征长度：λc = √(εsitoxXdep/εox)
   ```

2. **漏致势垒降低（DIBL）**
   ```
   DIBL = -ΔVTH/ΔVDS ≈ 50-100 mV/V（短沟道）
   ```

3. **亚阈值摆幅退化**
   ```
   SS = (kT/q)ln(10)[1 + Cd/Cox]
   短沟道：Cd增加，SS退化
   ```

### 2.5.2 窄宽度效应

窄沟道器件（W < 1 μm）的阈值电压增加：
```
ΔVTH = (qNA/2εs) × (ΔW/Cox)
```

影响：
- 源跟随器的匹配性变差
- 需要最小宽度设计规则

### 2.5.3 热载流子效应

高电场区域（漏端）的载流子获得足够能量注入栅氧：

**退化机制**：
- 界面态产生：Δgm
- 氧化层陷阱电荷：ΔVTH
- 寿命模型：τ ∝ ID⁻ⁿ，n ≈ 2-3

**缓解措施**：
- LDD结构
- 降低VDD
- 增加沟道长度（关键晶体管）

### 2.5.4 栅隧穿电流

超薄栅氧（< 3 nm）的直接隧穿：
```
JG = (q³E²/16π²ℏφB) × exp(-4√(2m*)φB³/²/3qℏE)
```

影响：
- 静态功耗增加
- 动态节点电荷泄漏
- 像素暗电流贡献

### 2.5.5 应力效应

机械应力影响载流子迁移率：

**应力源**：
- STI边缘应力
- 硅化物应力
- 金属互连应力
- 封装应力

**迁移率变化**：
```
Δμ/μ = π × σ
```
其中π是压阻系数，σ是应力。

NMOS：拉伸应力有利（Δμ/μ > 0）
PMOS：压缩应力有利（Δμ/μ > 0）

## 2.6 工艺偏差与匹配

### 2.6.1 随机偏差源

MOS晶体管的随机偏差主要来源：

1. **随机掺杂涨落（RDF）**
   ```
   σ(VTH) = q/(Cox) × √(NA·WLeff/3)
   ```
   
2. **线边缘粗糙度（LER）**
   ```
   σ(L)/L ≈ 3-5%（65nm节点）
   ```

3. **氧化层厚度变化**
   ```
   σ(tox)/tox ≈ 2-3%
   ```

### 2.6.2 Pelgrom匹配模型

匹配晶体管对的失配：
```
σ²(ΔP) = A²P/(WL) + S²P·D²
```

其中：
- P：器件参数（VTH, β等）
- AP：面积相关失配参数
- SP：距离相关失配参数
- D：器件间距

典型值（65nm工艺）：
- AVTH ≈ 4-6 mV·μm
- Aβ/β ≈ 1-2 %·μm

### 2.6.3 系统偏差源

1. **光刻套刻误差**
   - 3σ ≈ 5-10 nm
   - 影响：电容失配

2. **阱邻近效应**
   - 阱边缘100 μm内VTH变化
   - ΔVTH ≈ 20-50 mV

3. **STI应力**
   - 窄宽度器件VTH偏移
   - 需要虚拟器件（dummy）

### 2.6.4 版图匹配技术

提高匹配性的版图技术：

1. **共质心布局**
   ```
   A B B A
   B A A B
   ```
   消除一阶梯度

2. **交叉耦合**
   ```
   M1: ├─┤ ├─┤
   M2: ├─┤ ├─┤
   交叉连接
   ```

3. **虚拟器件**
   - 边缘增加dummy器件
   - 确保刻蚀均匀性

4. **匹配规则**
   - 相同方向
   - 最小距离
   - 相同环境（金属覆盖等）

### 2.6.5 像素阵列匹配考虑

图像传感器的特殊匹配要求：

1. **列放大器匹配**
   - 目标：< 0.1% 增益失配
   - 影响：列固定模式噪声

2. **像素源跟随器匹配**
   - VTH失配→FPN
   - 需要CDS消除

3. **电流源匹配**
   - 偏置电流变化< 1%
   - 采用级联电流镜

## 本章小结

本章系统介绍了CMOS器件物理和工艺的核心知识：

**关键概念**：
1. MOS电容的三种工作状态及其在电荷存储中的应用
2. MOSFET的I-V特性和小信号模型
3. CMOS工艺流程及图像传感器的特殊要求
4. 器件缩放理论及像素缩放的独特挑战
5. 各种寄生效应和二级效应的影响
6. 工艺偏差与匹配的控制方法

**重要公式**：
- 阈值电压：VTH = VFB + 2φF + √(4εsqNAφF)/Cox
- MOSFET饱和区电流：ID = (μnCox/2)(W/L)(VGS - VTH)²
- Pelgrom匹配：σ²(ΔP) = A²P/(WL) + S²P·D²
- 短沟道DIBL：ΔVTH/ΔVDS ≈ 50-100 mV/V

**设计启示**：
- 理解器件物理是优化像素性能的基础
- 工艺限制决定了设计空间的边界
- 匹配性直接影响图像质量（FPN）
- 缩放不仅带来集成度提升，也带来新的挑战

掌握这些基础知识，将帮助你在后续章节中更好地理解像素设计、噪声优化和系统集成的各种权衡。

## 练习题

### 基础题

**2.1** 一个MOS电容具有以下参数：NA = 1e16 cm⁻³，tox = 10 nm，T = 300K。计算：
a) 平带电压VFB（假设φMS = -0.9V，Qox = 1e11 cm⁻²）
b) 阈值电压VTH
c) 最大耗尽区宽度xdmax

<details>
<summary>提示</summary>

- 使用φF = (kT/q)ln(NA/ni)计算费米势
- Cox = εox/tox，εox = 3.9ε0
- xdmax = √(4εsφF/qNA)

</details>

<details>
<summary>答案</summary>

a) 首先计算相关参数：
   - φF = 0.026 × ln(1e16/1.5e10) = 0.347 V
   - Cox = 3.9 × 8.85e-14 / 1e-6 = 3.45e-7 F/cm²
   - VFB = -0.9 - (1.6e-19 × 1e11)/(3.45e-7) = -0.946 V

b) VTH计算：
   - 第三项 = √(4 × 11.7 × 8.85e-14 × 1.6e-19 × 1e16 × 0.347) / 3.45e-7
   - = 0.456 V
   - VTH = -0.946 + 2×0.347 + 0.456 = 0.204 V

c) xdmax = √(4 × 11.7 × 8.85e-14 × 0.347 / (1.6e-19 × 1e16))
   = 0.219 μm

</details>

**2.2** 一个NMOS晶体管W/L = 10μm/0.5μm，μnCox = 200 μA/V²，VTH = 0.5V，λ = 0.05 V⁻¹。当VGS = 1.5V，VDS = 2V时，计算：
a) 漏极电流ID
b) 跨导gm
c) 输出电导gds

<details>
<summary>提示</summary>

- 判断工作区：VDS > VGS - VTH？
- 饱和区使用相应公式
- gm = 2ID/(VGS - VTH)

</details>

<details>
<summary>答案</summary>

a) VDS = 2V > VGS - VTH = 1V，晶体管工作在饱和区
   ID = 0.5 × 200 × 20 × 1² × (1 + 0.05×2) = 2.2 mA

b) gm = 2 × 2.2e-3 / 1 = 4.4 mS

c) gds = λ × ID = 0.05 × 2.2e-3 = 110 μS

</details>

**2.3** 两个匹配的NMOS晶体管，W = L = 1μm，AVTH = 5 mV·μm。计算：
a) 阈值电压失配的标准差σ(ΔVTH)
b) 若要σ(ΔVTH) < 1mV，最小器件尺寸是多少？

<details>
<summary>提示</summary>

使用Pelgrom模型：σ(ΔVTH) = AVTH/√(WL)

</details>

<details>
<summary>答案</summary>

a) σ(ΔVTH) = 5 / √(1×1) = 5 mV

b) 要求σ(ΔVTH) < 1 mV：
   1 = 5/√(WL)
   WL = 25 μm²
   若W = L，则L = 5 μm

</details>

### 挑战题

**2.4** 考虑一个源跟随器缓冲器，输入电容主要由栅电容主导。设Cgs = 10 fF，需要在1 μs内将1 pF的负载电容充电到90%的最终值。假设VDD = 3.3V，VTH = 0.7V，估算所需的偏置电流。讨论功耗与速度的权衡。

<details>
<summary>提示</summary>

- 源跟随器的小信号输出阻抗约为1/gm
- RC时间常数决定建立时间
- t90% ≈ 2.3τ = 2.3RC

</details>

<details>
<summary>答案</summary>

源跟随器输出阻抗：Rout ≈ 1/gm

建立时间要求：
t90% = 2.3 × Rout × CL = 1 μs
Rout = 1e-6 / (2.3 × 1e-12) = 435 kΩ

因此：gm = 1/Rout = 2.3 μS

对于饱和区MOSFET：
gm = 2ID/(VGS - VTH)

假设VGS - VTH = 0.5V（合理的过驱动电压）：
ID = gm × (VGS - VTH)/2 = 2.3e-6 × 0.5/2 = 0.575 μA

功耗：P = VDD × ID = 3.3 × 0.575 = 1.9 μW

权衡分析：
- 增加ID可以提高速度（gm增大）
- 功耗线性增加
- 可通过增加VGS-VTH来提高gm/ID效率
- 但过大的过驱动电压会减小输出摆幅

</details>

**2.5** 在0.18μm工艺中设计一个电流镜，要求输出电流精度优于1%（3σ）。已知Aβ = 2%·μm，最小沟道长度Lmin = 0.18μm。确定：
a) 最小器件尺寸
b) 若考虑沟道长度调制（λ = 0.1 V⁻¹），如何改进设计？

<details>
<summary>提示</summary>

- 电流镜精度受VTH和β失配影响
- 考虑级联结构减小λ效应

</details>

<details>
<summary>答案</summary>

a) 电流失配主要由β失配决定：
   σ(ΔI/I) ≈ σ(Δβ/β) = Aβ/√(WL)
   
   要求3σ < 1%，即σ < 0.33%：
   0.33% = 2%/√(WL)
   WL = (2/0.33)² = 36.7 μm²
   
   选择L = 1μm（> Lmin以减小短沟道效应）
   则W = 36.7μm

b) 改进设计：
   1. 采用级联电流镜（Cascode）：
      - 输出阻抗增加到gmro²
      - 电流误差：ΔI/I ≈ VDS/(VAL) → VDS/(gmro²VDS) ≈ 1/(gmro)
      - 典型值：gmro ≈ 30-50，误差< 2-3%
   
   2. 使用更长的沟道长度：
      - L = 2μm，λL乘积增加
      - 代价：面积增加，速度降低
   
   3. 采用反馈环路稳定输出电压

</details>

**2.6** 分析像素缩放从1.4μm到0.7μm对以下参数的影响：
a) 满阱容量（假设恒场缩放）
b) 转换增益
c) 暗电流（假设界面态密度不变）
d) 提出三种补偿性能下降的创新方案

<details>
<summary>提示</summary>

- FWC ∝ 面积 × 耗尽区深度
- 转换增益 = q/C
- 暗电流包含体积分量和表面分量

</details>

<summary>答案</summary>

缩放因子k = 2

a) 满阱容量：
   - 面积缩放：1/4
   - 耗尽区深度缩放：1/2（恒场缩放）
   - FWC缩放：1/8
   - 从10,000 e⁻ → 1,250 e⁻
   - 动态范围损失：18 dB

b) 转换增益：
   - 电容C ∝ 面积：缩放1/4
   - CG = q/C增加4倍
   - 从40 μV/e⁻ → 160 μV/e⁻
   - 有利于降低读出噪声的影响

c) 暗电流：
   - 体积分量：∝ 体积，缩放1/8
   - 表面分量：∝ 表面积，缩放1/4
   - 总体约缩放1/4到1/8
   - 但相对于FWC，暗电流影响增大2-3倍

d) 创新补偿方案：

   1. **深耗尽区设计**：
      - 不按比例缩放耗尽区深度
      - 使用高阻衬底（> 1000 Ω·cm）
      - FWC仅缩放1/4而非1/8
      - 挑战：串扰增加

   2. **3D像素结构**：
      - 垂直光电二极管
      - 利用深度方向收集电荷
      - FWC可保持1/2缩放
      - 需要特殊工艺

   3. **双转换增益**：
      - 动态切换浮动扩散节点电容
      - 高光时大电容（低CG，大FWC）
      - 低光时小电容（高CG，低噪声）
      - 扩展动态范围20-30 dB

</details>

## 常见陷阱与错误

### 设计陷阱

1. **忽视体效应**
   - 错误：假设所有晶体管VTH相同
   - 后果：源跟随器增益误差
   - 正确：考虑VSB ≠ 0时的VTH变化

2. **亚阈值泄漏低估**
   - 错误：认为VGS < VTH时ID = 0
   - 后果：动态节点电荷泄漏
   - 正确：ID ∝ exp(qVGS/nkT)，永不为零

3. **匹配过度优化**
   - 错误：盲目增大器件尺寸
   - 后果：寄生电容增加，速度下降
   - 正确：平衡匹配性与其他性能指标

### 工艺陷阱

4. **界面态影响**
   - 错误：仅关注体暗电流
   - 后果：表面暗电流主导
   - 正确：Si-SiO₂界面钝化至关重要

5. **应力效应忽视**
   - 错误：未考虑STI应力
   - 后果：边缘像素性能异常
   - 正确：增加虚拟结构

### 仿真陷阱

6. **模型适用范围**
   - 错误：线性区公式用于所有VDS
   - 后果：电流计算错误
   - 正确：判断工作区，选择正确公式

7. **温度效应**
   - 错误：室温参数用于全温度范围
   - 后果：高温性能退化
   - 正确：μ ∝ T⁻³/²，VTH随温度变化

## 最佳实践检查清单

### 器件设计

- [ ] 最小尺寸规则：L ≥ Lmin，W ≥ Wmin
- [ ] 匹配要求：关键对称电路采用共质心布局
- [ ] 体效应补偿：源跟随器考虑VSB影响
- [ ] 过驱动电压：VGS - VTH > 100-200 mV
- [ ] 沟道长度：关键晶体管L > Lmin降低λ效应

### 工艺考虑

- [ ] 设计规则检查（DRC）：满足所有间距要求
- [ ] 天线规则：防止等离子体损伤
- [ ] 密度规则：满足金属/多晶硅密度要求
- [ ] 虚拟填充：确保工艺均匀性
- [ ] ESD保护：所有I/O添加保护结构

### 可靠性

- [ ] 热载流子：关键路径采用LDD结构
- [ ] 栅氧完整性：Vox < 0.7×Vox_max
- [ ] 电迁移：电流密度< 1 mA/μm
- [ ] 闩锁防护：保护环和阱接触
- [ ] 温度范围：-40°C到85°C验证

### 版图优化

- [ ] 寄生最小化：关键路径金属宽度> minimum
- [ ] 屏蔽：敏感节点添加屏蔽层
- [ ] 对称性：差分电路完全对称
- [ ] 隔离：数字/模拟分区
- [ ] 电源/地线：足够宽度，多通孔连接

---

[← 第1章：半导体物理与光电效应](chapter1.md) | [目录](index.md) | [第3章：光电二极管与像素理论 →](chapter3.md)